{"version":3,"sources":["components/app/app.module.css","components/burger-ingredients/group/group.module.css","components/modal-overlay/modal-overlay.module.css","components/feed/feed-list/feed-list.module.css","pages/profile/orders.module.css","pages/order-info.module.css","pages/profile/profile-page.module.css","components/app-header/icon-button/icon-button.tsx","components/app-header/app-header.tsx","services/rest-api.ts","utils/api.ts","services/actions/ingredients.ts","services/reducers/ingredients.ts","services/actions/cart.ts","services/reducers/cart.ts","services/actions/user.ts","services/reducers/user.ts","services/actions/wsActions.ts","services/reducers/wsReducer.ts","services/reducers/index.ts","services/store.ts","services/socketMiddleware.ts","components/burger-ingredients/group/ingredient/ingredient.tsx","components/burger-ingredients/group/group.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-constructor/drag-element/drag-element.tsx","components/burger-constructor/cart-total/cart-total.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/done.png","components/order-details/order-details.tsx","components/burger-constructor/burger-constructor.tsx","types/index.ts","components/ingredients-details/ingredients-details.tsx","utils/date.ts","components/order-info/order-info.tsx","pages/login-page.tsx","pages/register-page.tsx","pages/forgot-password-page.tsx","pages/reset-password-page.tsx","pages/profile/profile-form.tsx","components/order-list-item/order-list-item.tsx","components/feed/feed-list/feed-list.tsx","pages/profile/orders.tsx","pages/profile/logout.tsx","pages/profile/profile-page.tsx","pages/page-not-found.tsx","pages/ingredient-page.tsx","components/feed/feed-stat/feed-stat.tsx","pages/feed-page.tsx","pages/order-info.tsx","components/protected-route.jsx","components/app/app.tsx","reportWebVitals.ts","index.tsx","components/order-info/order-info.module.css","components/order-list-item/order-list-item.module.css","components/order-details/order-details.module.css","components/app-header/app-header.module.css","components/ingredients-details/ingredients-details.module.css","components/feed/feed-stat/feed-stat.module.css","components/burger-ingredients/group/ingredient/ingredient.module.css","components/burger-constructor/burger-constructor.module.css","pages/feed-page.module.css","components/burger-ingredients/burger-ingredients.module.css","components/modal/modal.module.css","components/app-header/icon-button/icon-button.module.css","components/burger-constructor/drag-element/drag-element.module.css","components/burger-constructor/cart-total/cart-total.module.css","pages/common.module.css"],"names":["module","exports","IconButton","text","children","type","size","className","styles","icon","AppHeader","currentUserName","pathname","useLocation","getIconCls","path","header","to","exact","activeClassName","link_active","link","baseUrl","checkResponse","res","ok","json","then","err","Promise","reject","fetchWithRefresh","url","options","fetch","Error","message","method","headers","body","JSON","stringify","token","localStorage","getItem","refreshData","success","setItem","refreshToken","accessToken","Authorization","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_REQUEST_SUCCESS","GET_INGREDIENTS_REQUEST_FAILED","initialState","ingredientsRequestInProgress","ingredientsRequestFailed","ingredientsAll","ADD_INGREDIENT","DELETE_INGREDIENT","PLACE_ORDER_REQUEST","PLACE_ORDER_REQUEST_SUCCESS","PLACE_ORDER_REQUEST_FAILED","MOVE_CART_INGREDIENT","cartIngredients","orderRequestInProgress","orderRequestFailed","order","number","textStatus","moveBunToFirstPlace","foundBunIndex","findIndex","item","length","foundBun","find","splice","unshift","REGISTER_REQUEST_SUCCESS","REGISTER_REQUEST_FAILED","LOGIN_REQUEST","LOGIN_REQUEST_SUCCESS","LOGIN_REQUEST_FAILED","LOGOUT_REQUEST","LOGOUT_REQUEST_SUCCESS","LOGOUT_REQUEST_FAILED","FORGOT_PASSWORD_REQUEST_SUCCESS","FORGOT_PASSWORD_REQUEST_FAILED","RESET_PASSWORD_REQUEST_SUCCESS","RESET_PASSWORD_REQUEST_FAILED","GET_USER_REQUEST","GET_USER_REQUEST_SUCCESS","GET_USER_REQUEST_FAILED","PATCH_USER_REQUEST_SUCCESS","PATCH_USER_REQUEST_FAILED","REGISTER_FORM_SET_VALUE","FORGOT_PASSWORD_FORM_SET_VALUE","RESET_PASSWORD_FORM_SET_VALUE","LOGIN_FORM_SET_VALUE","PROFILE_FORM_SET_VALUE","PROFILE_FORM_RESET","userPath","getUser","dispatch","payload","user","userIsLoading","catch","e","currentUser","name","email","registration","form","password","requestFailed","requestFailMessage","forgotPassword","requestSuccess","resetPassword","login","profile","logout","requestInProgress","WS_CONNECTION_START","WS_CONNECTION_STOP","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","wsActions","wsStart","wsStop","onOpen","onClose","onError","onMessage","wsConnected","ordersArray","totalOrders","totalOrdersToday","rootReducer","combineReducers","ingredients","state","action","cart","store","filter","uuid","swapItems","arr","index1","index2","map","val","idx","dragIndex","hoverIndex","field","value","ws","total","totalToday","orders","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","enhancer","applyMiddleware","thunk","socket","next","getState","readyState","close","WebSocket","wsUrl","onopen","event","onerror","onclose","onmessage","parse","data","socketMiddleware","createStore","useSelector","selectorHook","useDispatch","dispatchHook","Ingredient","ingredientObj","location","amount","_id","useDrag","collect","monitor","opacity","isDragging","dragRef","container","ref","style","prevLocation","count","image","src","alt","price","itemName","Group","id","title","ingredient","index","BurgerIngredients","groupsArr","useState","activeTab","setActiveTab","tabs","group","onClick","tab","document","getElementById","scrollIntoView","behavior","onTabClick","active","groups","onScroll","topY","currentTarget","offsetTop","nearestGroup","reduce","a","b","groupBoxA","groupBoxB","Math","abs","getBoundingClientRect","y","handleScroll","ingr","DragElement","props","useRef","isDrag","useDrop","accept","isOver","hover","draggableEl","current","hoverBoundingRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverActualY","dropRef","border","drag_icon","thumbnail","image_mobile","isLocked","handleClose","CartTotal","currency","some","showOrderDetails","ModalOverlay","onModalClose","overlay","target","Modal","React","useEffect","addEventListener","closeByEscape","removeEventListener","key","ReactDOM","createPortal","closeButton","OrderDetails","orderNumber","orderStatus","windowBody","centerText","doneImage","BurgerConstructor","showModal","setShowModal","currentUserEmail","history","useHistory","drop","uuidv4","addIngredient","isHover","dropTarget","borderColor","bun","cartTotal","cartIngredientsWithoutBun","currentItem","drag_list","placeOrder","replace","OrderStatuses","IngredientDetails","useParams","image_large","calories","caloriesItem","proteins","fat","carbohydrates","defaultIngredient","ingredientId","formatDate","dateString","Date","toLocaleTimeString","month","hour","minute","OrderInfo","setOrder","loadingError","setLoadingError","orderPath","fullIngredients","countIngredients","totalCost","orderDate","fullIngredient","quantity","status","done","pending","created","createdAt","readyOrder","ingredientList","Object","values","ingredientRow","ingrImage","titlePriceContainer","LoginPage","onFormChange","onSubmit","preventDefault","onChange","placeholder","error","errorText","undefined","htmlType","RegisterPage","register","ForgotPasswordPage","ResetPasswordPage","forgotPasswordRequestSuccess","ProfileForm","updateUser","OrderListItem","orderObj","overflowCounter","orderIngredients","slice","orderLink","imageContainer","FeedList","OrdersWithFullIngredients","updatedAt","list","Orders","console","log","Logout","ProfilePage","menu","menu_item","active_link","removeItem","PageNotFound","IngredientPage","FeedStat","readyOrders","pendingOrders","orderProgress","statusColumn","orderNumbers","toLocaleString","FeedPage","centerContainer","ordersContainer","feedContainer","statContainer","OrderInfoPage","ProtectedRoute","rest","render","from","App","closeModalWindow","goBack","DndProvider","backend","HTML5Backend","main","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode"],"mappings":"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","file":"static/js/main.441150e1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__1wO9l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"group_container__3XVzm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__pZ5VB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"feed-list_list__gDe-L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"orders_container__3gzih\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-info_container__24670\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile-page_container__2Oxng\",\"menu\":\"profile-page_menu__1R4bX\",\"menu_item\":\"profile-page_menu_item__1m-qq\",\"link\":\"profile-page_link__283WL\",\"active_link\":\"profile-page_active_link__144D2\"};","import React, {FC} from 'react';\r\nimport {Button} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from \"../icon-button/icon-button.module.css\";\r\n\r\ntype IconButtonProps = {\r\n\ttext: string;\r\n}\r\n\r\nexport const IconButton: FC<IconButtonProps> = ({text, children}) => {\r\n\treturn (\t\t\t\r\n\t\t<Button type=\"secondary\" size=\"medium\">\r\n\t\t\t<span className = {styles.icon}>\r\n\t\t\t\t{children}\t\t\t\t\t\t\t\t\t\r\n\t\t\t</span>\t\r\n\t\t\t<span className = {`${styles.text} text ml-2`}>\r\n\t\t\t\t{text}\r\n\t\t\t</span>\r\n\t\t</Button>\t\t\t\r\n\t)\r\n}\r\n\r\n","import React from 'react';\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './app-header.module.css';\r\nimport { IconButton } from './icon-button/icon-button';\r\nimport { NavLink, useLocation, Link  } from 'react-router-dom';\r\n\r\nexport default function AppHeader({currentUserName}: {currentUserName: string}) {\r\n\r\n\tconst { pathname } = useLocation();\r\n\r\n\tfunction getIconCls(path: string) {\r\n\t\treturn (pathname === path) ? 'primary' : 'secondary';\r\n\t}\r\n\r\n\treturn (\r\n\t\t<nav className = {styles.header}>\r\n\t\t\t<NavLink \r\n\t\t\t\tto='/' \r\n\t\t\t\texact \r\n\t\t\t\tactiveClassName = {styles.link_active}\r\n\t\t\t\tclassName = {styles.link}  //TODO\r\n\t\t\t>\r\n\t\t\t\t<IconButton\ttext = 'Конструктор'>\t\t\r\n\t\t\t\t\t<BurgerIcon type = {getIconCls('/')}/>\r\n\t\t\t\t</IconButton>\r\n\t\t\t</NavLink>\t\r\n\r\n\t\t\t<NavLink to = '/feed' exact activeClassName = {styles.link_active}>\r\n\t\t\t\t<IconButton\ttext = 'Лента заказов'>\t\t\r\n\t\t\t\t\t<ListIcon type = {getIconCls('/orders')}/>\r\n\t\t\t\t</IconButton>\t\t\t\t\r\n\t\t\t</NavLink>\r\n\r\n\t\t\t<Link to = '/' className = {styles.link}>\r\n\t\t\t\t<Logo />\r\n\t\t\t</Link>\t\r\n\r\n\t\t\t<NavLink to = '/profile' activeClassName = {styles.link_active}>\r\n\t\t\t\t<IconButton\ttext = {currentUserName ? currentUserName : 'Личный кабинет'}>\t\t\r\n\t\t\t\t\t<ProfileIcon type = {getIconCls('/profile')}/>\r\n\t\t\t\t</IconButton>\t\t\t\t\r\n\t\t\t</NavLink>\r\n\t\t</nav> \r\n\t)\r\n}\r\n","export const baseUrl = 'https://norma.nomoreparties.space/api';","import { baseUrl } from \"../services/rest-api\";\r\nimport { CustomHeaders } from '../types';\r\n\r\nconst refreshTokenPath = '/auth/token';\r\n\r\n/*export function checkResponse(res) {\r\n\tif (res.ok) {\r\n\t\treturn res.json();\r\n\t} \r\n\t//Архитектор был молодец и возвращает JSON не только лишь со статусом 200\r\n\tif([401, 403].includes(res.status)) {\r\n\t\treturn res.json();\r\n\t}\r\n\treturn Promise.reject(res.status);\r\n} */\r\n\r\nexport const checkResponse = (res: Response) => {\r\n\treturn res.ok ? res.json() : res.json().then(err => Promise.reject(err))\r\n  } \r\n\r\nexport const refreshToken = () => {\r\n\treturn fetch(baseUrl + refreshTokenPath, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tbody: JSON.stringify( { token: localStorage.getItem('refreshToken') }) \r\n\t}).then(checkResponse);\r\n};\r\n// options: Request & {headers: CustomHeaders} TODO\r\nexport const fetchWithRefresh = async (url: string, options: {\r\n\t\theaders: CustomHeaders, body?: string, method?: string}) => {\r\n\ttry {\t\t\r\n\t  \tconst res = await fetch(url, options);\r\n\t  \treturn await checkResponse(res);\r\n\t} catch (err) {\r\n\t  \tif (err instanceof Error && err.message === 'jwt expired') {\t\t\r\n\t\t\tconst refreshData = await refreshToken();\r\n\t\t\tif(!refreshData.success) {\r\n\t\t\t\tPromise.reject(refreshData);\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem('refreshToken', refreshData.refreshToken);\r\n\t\t\tlocalStorage.setItem('accessToken', refreshData.accessToken);\t\t\r\n\t\t\toptions.headers.Authorization = refreshData.accessToken;\r\n\t\t\tconst res = await fetch(url, options);\r\n\t\t\treturn await checkResponse(res);\r\n\t \t } else {\r\n\t\t\treturn Promise.reject(err);\r\n\t  \t}\r\n\t}\r\n  }","import { checkResponse } from '../../utils/api';\r\nimport { baseUrl } from '../rest-api';\r\nimport { TIngredient } from '../../types';\r\nimport { TAppDispatch, TAppThunk } from '../store';\r\n\r\nexport const GET_INGREDIENTS_REQUEST = 'GET_INGREDIENTS_REQUEST';\r\nexport const GET_INGREDIENTS_REQUEST_SUCCESS = 'GET_INGREDIENTS_REQUEST_SUCCESS';\r\nexport const GET_INGREDIENTS_REQUEST_FAILED = 'GET_INGREDIENTS_REQUEST_FAILED';\r\n\r\n\r\nexport type TIngredientsActions =\r\n\t{\r\n\t\ttype: typeof GET_INGREDIENTS_REQUEST;\t\r\n\t} | {\r\n\t\ttype: typeof GET_INGREDIENTS_REQUEST_SUCCESS;\r\n\t\tpayload: TIngredient[];\r\n\t} | {\r\n\t\ttype: typeof GET_INGREDIENTS_REQUEST_FAILED;\t\r\n\t}\r\n\r\nconst ingredientsPath = '/ingredients';\t\r\n\r\nexport const getIngredients: TAppThunk = () => {\t\r\n\treturn function(dispatch: TAppDispatch) {\r\n\t\tdispatch({\r\n\t\t  type: GET_INGREDIENTS_REQUEST\r\n\t\t});\r\n\r\n\t\t//fetch('https://api.codetabs.com/v1/proxy/?quest=https://fr.upravdom.duckdns.org/wl/?id=fNTuij9V6KeE1A0sa4ndGSpxFdg0s0iq&fmode=open')\r\n\t\tfetch(baseUrl + ingredientsPath)\t\t\r\n\t\t\t.then(checkResponse) \r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: GET_INGREDIENTS_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: res.data    \r\n\t\t\t\t\t});    \r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: GET_INGREDIENTS_REQUEST_FAILED\t\t\t\t\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: GET_INGREDIENTS_REQUEST_FAILED\t\t\t\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n","import {\r\n\tTIngredientsActions,\r\n\tGET_INGREDIENTS_REQUEST,\r\n\tGET_INGREDIENTS_REQUEST_SUCCESS,\r\n\tGET_INGREDIENTS_REQUEST_FAILED\r\n} from '../actions/ingredients';\r\nimport { TIngredient } from '../../types';\r\n\r\ntype TConstructorStateIngr = {\r\n\tingredientsRequestInProgress: boolean,\r\n\tingredientsRequestFailed: boolean,\r\n\tingredientsAll: TIngredient[]\r\n}\r\n\r\nconst initialState: TConstructorStateIngr = {\r\n\tingredientsRequestInProgress: false,\r\n\tingredientsRequestFailed: false,\r\n\tingredientsAll: []\r\n}\r\n\r\nexport const ingredientsReducer = (state = initialState, action: TIngredientsActions): TConstructorStateIngr => {\r\n  \tswitch (action.type) {\r\n\t\tcase GET_INGREDIENTS_REQUEST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t// Запрос начал выполняться\r\n\t\t\t\tingredientsRequestInProgress: true,\r\n\t\t\t\t// Сбрасываем статус наличия ошибок от предыдущего запроса \r\n\t\t\t\t// на случай, если он был и завершился с ошибкой\r\n\t\t\t\tingredientsRequestFailed: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase GET_INGREDIENTS_REQUEST_SUCCESS: {\t\t\t\r\n\t\t\treturn { \r\n\t\t\t\t...state, \r\n\t\t\t\t// Запрос выполнился успешно, помещаем полученные данные в хранилище\r\n\t\t\t\tingredientsAll: action.payload, \r\n\t\t\t\t// Запрос закончил своё выполнение\r\n\t\t\t\tingredientsRequestInProgress: false \r\n\t\t\t};\r\n\t\t}\r\n\t\tcase GET_INGREDIENTS_REQUEST_FAILED: {\r\n\t\treturn { \r\n\t\t\t\t...state, \r\n\t\t\t\t// Запрос выполнился с ошибкой, \r\n\t\t\t\t// выставляем соответсвующие значения в хранилище\r\n\t\t\t\tingredientsRequestFailed: true, \r\n\t\t\t\t// Запрос закончил своё выполнение\r\n\t\t\t\tingredientsRequestInProgress: false \r\n\t\t\t};\r\n\t\t}\t\t\r\n\t\tdefault: {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n}","import { v4 as uuidv4 } from 'uuid';\r\nimport { fetchWithRefresh } from '../../utils/api';\r\nimport { baseUrl } from '../rest-api';\r\nimport { TIngredientCart, TIngredient, TOrder } from '../../types';\r\nimport { TAppDispatch, TAppThunk } from '../store';\r\n\r\nexport const ADD_INGREDIENT = 'ADD_INGREDIENT';\r\nexport const DELETE_INGREDIENT = 'DELETE_INGREDIENT';\r\nexport const PLACE_ORDER_REQUEST = 'PLACE_ORDER_REQUEST';\r\nexport const PLACE_ORDER_REQUEST_SUCCESS = 'PLACE_ORDER_REQUEST_SUCCESS';\r\nexport const PLACE_ORDER_REQUEST_FAILED = 'PLACE_ORDER_REQUEST_FAILED';\r\nexport const MOVE_CART_INGREDIENT = 'MOVE_CART_INGREDIENT';\r\n\r\nconst orderPath = '/orders';\r\n\r\nexport type TCartActions = \r\n\t{\r\n\t\ttype: typeof ADD_INGREDIENT;\r\n\t\tpayload: TIngredientCart;\r\n\t} | {\r\n\t\ttype: typeof DELETE_INGREDIENT;\r\n\t\tpayload: TIngredientCart;\r\n\t} | {\r\n\t\ttype: typeof PLACE_ORDER_REQUEST;\t\t\r\n\t} | {\r\n\t\ttype: typeof PLACE_ORDER_REQUEST_SUCCESS;\r\n        payload: TOrder;\r\n\t} | {\r\n\t\ttype: typeof PLACE_ORDER_REQUEST_FAILED;\r\n\t} | {\r\n\t\ttype: typeof MOVE_CART_INGREDIENT;\r\n\t\tpayload: {\r\n\t\t\tdragIndex: number, hoverIndex: number\r\n\t\t};\r\n\t};\r\n\r\nexport const addIngredient = (ingredient: TIngredientCart) => ({\r\n\ttype: ADD_INGREDIENT,\r\n\tpayload: {\r\n\t\t...ingredient, \r\n\t\tuuid: uuidv4()\r\n\t}\r\n});\r\n\r\nexport const placeOrder: TAppThunk = (cartIngredients: TIngredientCart[]) => {\t\r\n\treturn function(dispatch: TAppDispatch) { \r\n\t\tconst accessToken = localStorage.getItem('accessToken');\r\n\t\tif(accessToken === null) {\r\n\t\t\treturn new Error('Missing accessToken');\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t  type: PLACE_ORDER_REQUEST\r\n\t\t});\t\t\t\t\r\n\r\n\t\tfetchWithRefresh(baseUrl + orderPath, { \r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: accessToken\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify( { \"ingredients\" : cartIngredients.map(item => item._id) })\r\n\t\t})\t\t\t\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success && res.order) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: PLACE_ORDER_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: res.order    \r\n\t\t\t\t\t});    \r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: PLACE_ORDER_REQUEST_FAILED\t\t\t\t\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: PLACE_ORDER_REQUEST_FAILED\t\t\t\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n","import { TIngredientCart } from '../../types';\r\nimport {\r\n\tTCartActions,\r\n\tADD_INGREDIENT, \r\n\tDELETE_INGREDIENT, \r\n\tPLACE_ORDER_REQUEST,\r\n\tPLACE_ORDER_REQUEST_SUCCESS,\r\n\tPLACE_ORDER_REQUEST_FAILED,\r\n\tMOVE_CART_INGREDIENT\r\n} from '../actions/cart';\r\n\r\ntype TConstructorStateCart = {\r\n\tcartIngredients: TIngredientCart[],\r\n\torderRequestInProgress: boolean,\r\n\torderRequestFailed: boolean,\r\n    order: {\r\n        number: number, \r\n        textStatus: string\r\n    }\r\n}\r\n\r\nconst initialState: TConstructorStateCart = {\r\n\tcartIngredients: [] ,\r\n\torderRequestInProgress: false,\r\n\torderRequestFailed: false,\r\n    order: {\r\n        number: 0, \r\n        textStatus: ''\r\n    }\r\n}\r\n\r\n\r\n//при добавлении булки в ингредиенты, ставим её в начало массива, чтобы не мешала переставлять элементы при dnd\r\nconst moveBunToFirstPlace = (cartIngredients: TIngredientCart[]) => {\r\n\tconst foundBunIndex = cartIngredients.findIndex(item => item.type === 'bun');\r\n\tif(foundBunIndex !== -1 && cartIngredients.length > 1) {\r\n\t\tconst foundBun = cartIngredients.find(item => item.type === 'bun');\r\n\t\tcartIngredients.splice(foundBunIndex, 1);\r\n\t\tfoundBun && cartIngredients.unshift(foundBun);\r\n\t}\t\r\n\treturn cartIngredients;\r\n}\r\n\r\nexport const cartReducer = (store = initialState, action: TCartActions): TConstructorStateCart => {\r\n\tswitch (action.type) {            \r\n\t\tcase ADD_INGREDIENT:\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tcartIngredients: (action.payload.type === 'bun') ? \r\n\t\t\t\tmoveBunToFirstPlace([...[...store.cartIngredients\r\n\t\t\t\t\t\t.filter((item) => item.type !== 'bun'),  //заменяем булку\r\n\t\t\t\t\t\t\taction.payload]\r\n\t\t\t\t\t]) : \r\n\t\t\t\t\t[...store.cartIngredients, action.payload]\r\n\t\t\t} \r\n\t\tcase DELETE_INGREDIENT:      \r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tcartIngredients: [...store.cartIngredients]\r\n\t\t\t\t\t.filter((item) => item.uuid !== action.payload.uuid)        \r\n\t\t\t} \r\n\t\tcase PLACE_ORDER_REQUEST: {\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\t// Запрос начал выполняться\r\n\t\t\t\torderRequestInProgress: true,\r\n\t\t\t\t// Сбрасываем статус наличия ошибок от предыдущего запроса \r\n\t\t\t\t// на случай, если он был и завершился с ошибкой\r\n\t\t\t\torderRequestFailed: false,\r\n\t\t\t\torder: {number: 0, textStatus: 'Оформление...'}\r\n\t\t\t}\r\n\t\t}\t\r\n\t\tcase PLACE_ORDER_REQUEST_SUCCESS: {\t\t\t\r\n\t\t\treturn { \r\n\t\t\t\t...store, \r\n\t\t\t\t// Запрос выполнился успешно, помещаем полученные данные в хранилище\r\n\t\t\t\torder: {...action.payload, textStatus: ''}, \r\n\t\t\t\t// Запрос закончил своё выполнение\r\n\t\t\t\torderRequestInProgress: false,\r\n\t\t\t\tcartIngredients: []\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase PLACE_ORDER_REQUEST_FAILED: {\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\t// Запрос начал выполняться\r\n\t\t\t\torderRequestInProgress: false,\r\n\t\t\t\t// Сбрасываем статус наличия ошибок от предыдущего запроса \r\n\t\t\t\t// на случай, если он был и завершился с ошибкой\r\n\t\t\t\torderRequestFailed: true,\r\n\t\t\t\torder: {number: 0, textStatus: 'Произошла ошибка'}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase MOVE_CART_INGREDIENT: {\r\n\t\t\tconst swapItems = (arr:  Array<any>, index1: number, index2: number) => arr.map((val, idx) => {\r\n\t\t\t\tif (idx === index1) return arr[index2];\r\n\t\t\t\tif (idx === index2) return arr[index1];\r\n\t\t\t\treturn val;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//если есть булка, которая не участвует в перетаскивании, индексы надо пересчитать.\r\n\t\t\tif(store.cartIngredients.findIndex((item : TIngredientCart) => item.type === 'bun') !== -1) {\r\n\t\t\t\taction.payload.dragIndex++;\r\n\t\t\t\taction.payload.hoverIndex++;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//console.log('swapItems', action.payload.dragIndex, action.payload.hoverIndex);\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tcartIngredients: swapItems(store.cartIngredients, action.payload.dragIndex, action.payload.hoverIndex)\r\n\t\t\t}\t\r\n\t\t}\t\r\n\r\n\t\tdefault:\r\n\t\t\treturn store\r\n \t}\r\n} ","import { checkResponse, fetchWithRefresh } from '../../utils/api';\r\nimport { baseUrl } from '../rest-api';\r\nimport { IUserRequest }  from '../../types';\r\nimport { TAppDispatch, TAppThunk } from '../store';\r\n\r\n\r\nexport const REGISTER_REQUEST = 'REGISTER_REQUEST';\r\nexport const REGISTER_REQUEST_SUCCESS = 'REGISTER_REQUEST_SUCCESS';\r\nexport const REGISTER_REQUEST_FAILED = 'REGISTER_REQUEST_FAILED';\r\n\r\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\r\nexport const LOGIN_REQUEST_SUCCESS = 'LOGIN_REQUEST_SUCCESS';\r\nexport const LOGIN_REQUEST_FAILED = 'LOGIN_REQUEST_FAILED';\r\n\r\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_REQUEST_SUCCESS = 'LOGOUT_REQUEST_SUCCESS';\r\nexport const LOGOUT_REQUEST_FAILED = 'LOGOUT_REQUEST_FAILED';\r\n\r\nexport const FORGOT_PASSWORD_REQUEST = 'FORGOT_PASSWORD_REQUEST';\r\nexport const FORGOT_PASSWORD_REQUEST_SUCCESS = 'FORGOT_PASSWORD_REQUEST_SUCCESS';\r\nexport const FORGOT_PASSWORD_REQUEST_FAILED = 'FORGOT_PASSWORD_REQUEST_FAILED';\r\n\r\nexport const RESET_PASSWORD_REQUEST = 'RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_REQUEST_SUCCESS = 'RESET_PASSWORD_REQUEST_SUCCESS';\r\nexport const RESET_PASSWORD_REQUEST_FAILED = 'RESET_PASSWORD_REQUEST_FAILED';\r\n\r\nexport const GET_USER_REQUEST = 'GET_USER_REQUEST';\r\nexport const GET_USER_REQUEST_SUCCESS = 'GET_USER_REQUEST_SUCCESS';\r\nexport const GET_USER_REQUEST_FAILED = 'GET_USER_REQUEST_FAILED';\r\n\r\nexport const PATCH_USER_REQUEST = 'PATCH_USER_REQUEST';\r\nexport const PATCH_USER_REQUEST_SUCCESS = 'PATCH_USER_REQUEST_SUCCESS';\r\nexport const PATCH_USER_REQUEST_FAILED = 'PATCH_USER_REQUEST_FAILED';\r\n\r\nexport const REGISTER_FORM_SET_VALUE = 'REGISTER_FORM_SET_VALUE';\r\nexport const FORGOT_PASSWORD_FORM_SET_VALUE = 'FORGOT_PASSWORD_FORM_SET_VALUE';\r\nexport const RESET_PASSWORD_FORM_SET_VALUE = 'RESET_PASSWORD_FORM_SET_VALUE';\r\nexport const LOGIN_FORM_SET_VALUE = 'LOGIN_FORM_SET_VALUE';\r\nexport const PROFILE_FORM_SET_VALUE = 'PROFILE_FORM_SET_VALUE';\r\nexport const PROFILE_FORM_RESET = 'PROFILE_FORM_RESET';\r\n\r\n\r\nexport type TUserActions = \r\n\t{\r\n\t\ttype: typeof REGISTER_REQUEST;\t\t\r\n\t} | {\r\n\t\ttype: typeof REGISTER_REQUEST_SUCCESS;\r\n\t\tpayload: {\r\n\t\t\tuser: IUserRequest;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof REGISTER_REQUEST_FAILED;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof LOGIN_REQUEST;\r\n\t} | {\r\n\t\ttype: typeof LOGIN_REQUEST_SUCCESS;\r\n\t\tpayload: {\r\n\t\t\tuser: IUserRequest;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof LOGIN_REQUEST_FAILED;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof LOGOUT_REQUEST;\t\r\n\t} | {\r\n\t\ttype: typeof LOGOUT_REQUEST_SUCCESS;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof LOGOUT_REQUEST_FAILED;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof FORGOT_PASSWORD_REQUEST;\r\n\t} | {\r\n\t\ttype: typeof FORGOT_PASSWORD_REQUEST_SUCCESS;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof FORGOT_PASSWORD_REQUEST_FAILED;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof RESET_PASSWORD_REQUEST;\r\n\t} | {\r\n\t\ttype: typeof RESET_PASSWORD_REQUEST_SUCCESS;\r\n\t} | {\r\n\t\ttype: typeof RESET_PASSWORD_REQUEST_FAILED;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof GET_USER_REQUEST;\r\n\t} | {\r\n\t\ttype: typeof GET_USER_REQUEST_SUCCESS;\r\n\t\tpayload: {\r\n\t\t\tuser: IUserRequest\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof GET_USER_REQUEST_FAILED;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof PATCH_USER_REQUEST;\r\n\t} | {\r\n\t\ttype: typeof PATCH_USER_REQUEST_SUCCESS;\r\n\t\tpayload: {\r\n\t\t\tuser: IUserRequest\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof PATCH_USER_REQUEST_FAILED;\r\n\t\tpayload: {\r\n\t\t\tmessage: string;\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof REGISTER_FORM_SET_VALUE;\r\n\t\tpayload: {\r\n\t\t\tfield: string, value: string\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof FORGOT_PASSWORD_FORM_SET_VALUE;\r\n\t\tpayload: {\r\n\t\t\tfield: string, value: string\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof RESET_PASSWORD_FORM_SET_VALUE;\r\n\t\tpayload: {\r\n\t\t\tfield: string, value: string\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof LOGIN_FORM_SET_VALUE;\r\n\t\tpayload: {\r\n\t\t\tfield: string, value: string\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof PROFILE_FORM_SET_VALUE;\r\n\t\tpayload: {\r\n\t\t\tfield: string, value: string\r\n\t\t};\r\n\t} | {\r\n\t\ttype: typeof PROFILE_FORM_RESET;\t\t\r\n\t};\r\n\r\n\r\n\r\nconst registerPath = '/auth/register';\r\nconst loginPath = '/auth/login';\r\nconst logoutPath = '/auth/logout';\r\nconst userPath = '/auth/user';\r\nconst forgotPasswordPath = '/password-reset';\r\nconst resetPasswordPath = '/password-reset/reset';\r\n\r\n\r\nexport const setRegisterFormValue = (field: string, value: string) => ({\r\n\ttype: REGISTER_FORM_SET_VALUE,\r\n\tpayload: {field, value}\r\n});\r\n\r\nexport const setForgotPasswordFormValue = (field: string, value: string) => ({\r\n\ttype: FORGOT_PASSWORD_FORM_SET_VALUE,\r\n\tpayload: {field, value}\r\n});\r\n\r\nexport const setResetPasswordFormValue = (field: string, value: string) => ({\r\n\ttype: RESET_PASSWORD_FORM_SET_VALUE,\r\n\tpayload: {field, value}\r\n});\r\n\r\nexport const setLoginFormValue = (field: string, value: string) => ({\r\n\ttype: LOGIN_FORM_SET_VALUE,\r\n\tpayload: {field, value}\r\n});\r\n\r\nexport const setProfileFormValue = (field: string, value: string) => ({\r\n\ttype: PROFILE_FORM_SET_VALUE,\r\n\tpayload: {field, value}\r\n});\r\n\r\n\r\n\r\nexport const register: TAppThunk = ({name, email, password} : IUserRequest) => {\r\n\treturn function(dispatch: TAppDispatch) {\r\n\t\tdispatch({\r\n\t\t  type: REGISTER_REQUEST\r\n\t\t});\r\n\t\t\r\n\t\tfetch(baseUrl + registerPath, { \r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify( { name, email, password }) \r\n\t\t})\r\n\t\t\t.then(checkResponse) \r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success && res.accessToken) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: REGISTER_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: { user: {...res.user, userIsLoading: false} }\t\t\t\t\t\r\n\t\t\t\t\t}); \r\n\t\t\t\t\tlocalStorage.setItem('accessToken', res.accessToken);\r\n\t\t\t\t\tlocalStorage.setItem('refreshToken', res.refreshToken);\t\t\t\t\t \r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: REGISTER_REQUEST_FAILED,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: REGISTER_REQUEST_FAILED,\r\n\t\t\t\t\tpayload: { message: e.message }\t\t\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n\r\nexport const login: TAppThunk = ({email, password}: Partial<IUserRequest>) => {\r\n\treturn function(dispatch: TAppDispatch) {\r\n\t\tdispatch({\r\n\t\t  type: LOGIN_REQUEST\r\n\t\t});\r\n\t\t\r\n\t\tfetch(baseUrl + loginPath, { \r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify( { email, password }) \r\n\t\t})\r\n\t\t\t.then(checkResponse) \r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: LOGIN_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: { user: {...res.user, userIsLoading: false} }\t\t\t\t\t\r\n\t\t\t\t\t}); \r\n\t\t\t\t\tlocalStorage.setItem('accessToken', res.accessToken);\r\n\t\t\t\t\tlocalStorage.setItem('refreshToken', res.refreshToken);\t\t\r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: LOGIN_REQUEST_FAILED,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: LOGIN_REQUEST_FAILED,\r\n\t\t\t\t\tpayload: { message: e.message }\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n\r\nexport const logout: TAppThunk = () => {\t\r\n\treturn function(dispatch: TAppDispatch) {\r\n\t\tdispatch({\r\n\t\t  type: LOGOUT_REQUEST\r\n\t\t});\r\n\t\t\r\n\t\tfetch(baseUrl + logoutPath, { \r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify( { token: localStorage.getItem('refreshToken') }) \r\n\t\t})\r\n\t\t\t.then(checkResponse) \r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success) {\t\t\t\t\t\t\t\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: LOGOUT_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\t\t\r\n\t\t\t\t\t}); \t\t\t\t\r\n\t\t\t\t\tlocalStorage.removeItem('accessToken');\r\n\t\t\t\t\tlocalStorage.removeItem('refreshToken');\t\r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: LOGOUT_REQUEST_FAILED,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: LOGOUT_REQUEST_FAILED,\r\n\t\t\t\t\tpayload: { message: e.message }\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n\r\nexport const forgotPassword: TAppThunk = (email: string) => {\t\r\n\treturn function(dispatch: TAppDispatch) {\r\n\t\tdispatch({\r\n\t\t  type: FORGOT_PASSWORD_REQUEST\r\n\t\t});\r\n\t\t\r\n\t\tfetch(baseUrl + forgotPasswordPath, { \r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify( {email}) \r\n\t\t})\r\n\t\t\t.then(checkResponse) \r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: FORGOT_PASSWORD_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\r\n\t\t\t\t\t});   \t\t\t\t\t\r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: FORGOT_PASSWORD_REQUEST_FAILED,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\t\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\t\t\t\t\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: FORGOT_PASSWORD_REQUEST_FAILED,\t\t\t\t\t\r\n\t\t\t\t\tpayload: { message: e.message }\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n\r\n\r\nexport const resetPassword: TAppThunk = ({password, token}: {password: string, token: string}) => {\r\n\treturn function(dispatch: TAppDispatch) {\r\n\t\tdispatch({\r\n\t\t  type: RESET_PASSWORD_REQUEST\r\n\t\t});\r\n\t\t\r\n\t\tfetch(baseUrl + resetPasswordPath, { \r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify( {password, token} ) \r\n\t\t})\r\n\t\t\t.then(checkResponse) \r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: RESET_PASSWORD_REQUEST_SUCCESS\r\n\t\t\t\t\t\t//payload: res.data    \r\n\t\t\t\t\t});    \r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: RESET_PASSWORD_REQUEST_FAILED,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: RESET_PASSWORD_REQUEST_FAILED,\r\n\t\t\t\t\tpayload: { message: e.message }\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n\r\nexport const getUser: TAppThunk = () => {\t\r\n\treturn function(dispatch) {\r\n\t\tconst accessToken = localStorage.getItem('accessToken');\r\n\t\tif(accessToken === null) {\r\n\t\t\treturn new Error('Missing accessToken');\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t  type: GET_USER_REQUEST\r\n\t\t});\r\n\t\t\r\n\t\tfetchWithRefresh(baseUrl + userPath, { \r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: accessToken\r\n\t\t\t}\r\n\t\t})\t\t\t\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: GET_USER_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: { user: {...res.user, userIsLoading: false} }\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t});   \t\t\t\t\t\r\n\t\t\t\t}else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: GET_USER_REQUEST_FAILED,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\t\t\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\t\t\t\t\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: GET_USER_REQUEST_FAILED,\t\t\t\t\t\r\n\t\t\t\t\tpayload: { message: e.message }\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n\r\n\r\nexport const updateUser: TAppThunk = ({ name, email, password }: IUserRequest) => {\r\n\treturn function(dispatch: TAppDispatch) {\r\n\t\tconst accessToken = localStorage.getItem('accessToken');\r\n\t\tif(accessToken === null) {\r\n\t\t\treturn new Error('Missing accessToken');\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t  type: PATCH_USER_REQUEST\r\n\t\t});\r\n\t\t\r\n\t\tfetchWithRefresh(baseUrl + userPath, { \r\n\t\t\tmethod: \"PATCH\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: accessToken\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify( {name, email, password}) \r\n\t\t})\t\t\t\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: PATCH_USER_REQUEST_SUCCESS,\r\n\t\t\t\t\t\tpayload: { user: res.user }\t\t\t\t\t\r\n\t\t\t\t\t});   \t\t\t\t\t\r\n\t\t\t\t}else {\t\t\t\t\t\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: PATCH_USER_REQUEST_FAILED,\r\n\t\t\t\t\t\tpayload: { message: res?.message }\r\n\t\t\t\t\t});  \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\t\t\t\t\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: PATCH_USER_REQUEST_FAILED,\t\t\t\t\t\r\n\t\t\t\t\tpayload: { message: e.message }\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\t\r\n\t}\r\n}\r\n\r\n\r\n","import {\r\n\tTUserActions,\r\n\tREGISTER_FORM_SET_VALUE,\r\n\tREGISTER_REQUEST_SUCCESS,\r\n\tREGISTER_REQUEST_FAILED,\r\n\tFORGOT_PASSWORD_FORM_SET_VALUE,\t\r\n\tRESET_PASSWORD_FORM_SET_VALUE,\r\n\tRESET_PASSWORD_REQUEST_SUCCESS,\r\n\tRESET_PASSWORD_REQUEST_FAILED,\t\r\n\tFORGOT_PASSWORD_REQUEST_SUCCESS,\r\n\tFORGOT_PASSWORD_REQUEST_FAILED,\r\n\tLOGIN_FORM_SET_VALUE,\r\n\tLOGIN_REQUEST,\r\n\tLOGIN_REQUEST_SUCCESS,\r\n\tLOGIN_REQUEST_FAILED,\r\n\tPROFILE_FORM_SET_VALUE,\r\n\tPROFILE_FORM_RESET,\r\n\tGET_USER_REQUEST,\r\n\tGET_USER_REQUEST_SUCCESS,\r\n\tGET_USER_REQUEST_FAILED,\r\n\tPATCH_USER_REQUEST_SUCCESS,\r\n\tLOGOUT_REQUEST,\r\n\tLOGOUT_REQUEST_SUCCESS\r\n} from '../actions/user';\r\n\r\n\r\ntype TConstructorStateUser = {\r\n\tcurrentUser: {\r\n\t\tname: string,\r\n\t\temail: string,\r\n\t\tuserIsLoading?: boolean\r\n\t},\r\n\tregistration: {\r\n\t\tform: {\r\n\t\t\tname: string,\r\n\t\t\temail: string,\r\n\t\t\tpassword: string\r\n\t\t},\t\t\r\n\t\trequestFailed: boolean,\r\n\t\trequestFailMessage: string | null\r\n\t},\r\n\tforgotPassword: {\r\n\t\tform: {\r\n\t\t\temail: string\r\n\t\t},\r\n\t\trequestSuccess: boolean,\r\n\t\trequestFailed: boolean,\r\n\t\trequestFailMessage: string | null\r\n\t},\r\n\tresetPassword: {\r\n\t\tform: {\t\t\t\r\n\t\t\tpassword: string,\r\n\t\t\ttoken: string\r\n\t\t},\r\n\t\trequestSuccess: boolean,\r\n\t\trequestFailed: boolean,\r\n\t\trequestFailMessage: string | null\r\n\t},\r\n\tlogin: {\r\n\t\tform: {\t\t\t\r\n\t\t\temail: string,\r\n\t\t\tpassword: string\r\n\t\t},\t\t\r\n\t\trequestFailed: boolean,\r\n\t\trequestFailMessage: string | null\r\n\t},\r\n\tprofile: {\r\n\t\tform: {\t\t\t\r\n\t\t\tname: string,\r\n\t\t\temail: string,\r\n\t\t\tpassword: string\r\n\t\t},\r\n\t\trequestSuccess: boolean,\t\t\r\n\t\trequestFailed: boolean,\r\n\t\trequestFailMessage: string | null\r\n\t},\r\n\tlogout: {\r\n\t\trequestInProgress: boolean,\r\n\t\trequestSuccess: boolean,\r\n\t\trequestFailed: boolean,\r\n\t\trequestFailMessage: string | null\r\n\t}\r\n}\r\n\r\nconst initialState: TConstructorStateUser = {\r\n\tcurrentUser: {\r\n\t\tname: '',\r\n\t\temail: '',\r\n\t\tuserIsLoading: false\r\n\t},\r\n\tregistration: {\r\n\t\tform: {\r\n\t\t\tname: '',\r\n\t\t\temail: '',\r\n\t\t\tpassword: ''\r\n\t\t},\r\n\t\t//requestSuccess: false,\r\n\t\trequestFailed: false,\r\n\t\trequestFailMessage: null\r\n\t},\r\n\tforgotPassword: {\r\n\t\tform: {\r\n\t\t\temail: ''\r\n\t\t},\r\n\t\trequestSuccess: false,\r\n\t\trequestFailed: false,\r\n\t\trequestFailMessage: null\r\n\t},\r\n\tresetPassword: {\r\n\t\tform: {\t\t\t\r\n\t\t\tpassword: '',\r\n\t\t\ttoken: ''\r\n\t\t},\r\n\t\trequestSuccess: false,\r\n\t\trequestFailed: false,\r\n\t\trequestFailMessage: null\r\n\t},\r\n\tlogin: {\r\n\t\tform: {\t\t\t\r\n\t\t\temail: '',\r\n\t\t\tpassword: ''\r\n\t\t},\r\n\t\t//requestSuccess: false,\r\n\t\trequestFailed: false,\r\n\t\trequestFailMessage: null\r\n\t},\r\n\tprofile: {\r\n\t\tform: {\t\t\t\r\n\t\t\tname: '',\r\n\t\t\temail: '',\r\n\t\t\tpassword: ''\r\n\t\t},\t\r\n\t\trequestSuccess: false,\t\r\n\t\trequestFailed: false,\r\n\t\trequestFailMessage: null\r\n\t},\r\n\tlogout: {\r\n\t\trequestInProgress: false,\r\n\t\trequestSuccess: false,\r\n\t\trequestFailed: false,\r\n\t\trequestFailMessage: null\r\n\t}\r\n}\r\n\r\nexport const userReducer = (store = initialState, action: TUserActions): TConstructorStateUser => {\r\n  \tswitch (action.type) {\r\n\t\tcase REGISTER_FORM_SET_VALUE:\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tregistration: {\r\n\t\t\t\t\t...store.registration,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.registration.form,\r\n\t\t\t\t\t\t[action.payload.field]: action.payload.value\r\n\t\t\t\t\t},\r\n\t\t\t\t\trequestFailed: false,\r\n\t\t\t\t\trequestFailMessage: null\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\t\t\t\r\n\t\tcase LOGIN_REQUEST_SUCCESS :\r\n\t\tcase REGISTER_REQUEST_SUCCESS : \r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tcurrentUser: action.payload.user,\r\n\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase REGISTER_REQUEST_FAILED : \r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tregistration: {\r\n\t\t\t\t\t...store.registration,\r\n\t\t\t\t\trequestFailed: true,\r\n\t\t\t\t\trequestFailMessage: action.payload.message\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase FORGOT_PASSWORD_FORM_SET_VALUE: \r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tforgotPassword: {\r\n\t\t\t\t\t...store.forgotPassword,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.forgotPassword.form,\r\n\t\t\t\t\t\t[action.payload.field]: action.payload.value\r\n\t\t\t\t\t},\r\n\t\t\t\t\trequestFailed: false,\r\n\t\t\t\t\trequestFailMessage: null\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase FORGOT_PASSWORD_REQUEST_SUCCESS : \r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tforgotPassword: {\r\n\t\t\t\t\t...store.forgotPassword,\r\n\t\t\t\t\trequestSuccess: true\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase FORGOT_PASSWORD_REQUEST_FAILED : \r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tforgotPassword: {\r\n\t\t\t\t\t...store.forgotPassword,\r\n\t\t\t\t\trequestFailed: true,\r\n\t\t\t\t\trequestFailMessage: action.payload.message\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase RESET_PASSWORD_FORM_SET_VALUE: \r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tresetPassword: {\r\n\t\t\t\t\t...store.resetPassword,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.resetPassword.form,\r\n\t\t\t\t\t\t[action.payload.field]: action.payload.value\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\t\r\n\t\tcase RESET_PASSWORD_REQUEST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tresetPassword: {\r\n\t\t\t\t\t...store.resetPassword,\r\n\t\t\t\t\trequestSuccess: true\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase RESET_PASSWORD_REQUEST_FAILED : \r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tresetPassword: {\r\n\t\t\t\t\t...store.resetPassword,\r\n\t\t\t\t\trequestFailed: true,\r\n\t\t\t\t\trequestFailMessage: action.payload.message\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase LOGIN_FORM_SET_VALUE: \r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tlogin: {\r\n\t\t\t\t\t...store.login,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.login.form,\r\n\t\t\t\t\t\t[action.payload.field]: action.payload.value\r\n\t\t\t\t\t},\r\n\t\t\t\t\trequestFailed: false,\r\n\t\t\t\t\trequestFailMessage: null\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase LOGIN_REQUEST_FAILED : \r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tlogin: {\r\n\t\t\t\t\t...store.login,\r\n\t\t\t\t\trequestFailed: true,\r\n\t\t\t\t\trequestFailMessage: action.payload.message\r\n\t\t\t\t},\r\n\t\t\t\tcurrentUser: {\r\n\t\t\t\t\t...store.currentUser,\r\n\t\t\t\t\tuserIsLoading: false\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\r\n\t\tcase PROFILE_FORM_SET_VALUE:\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tprofile: {\r\n\t\t\t\t\t...store.profile,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.profile.form,\r\n\t\t\t\t\t\t[action.payload.field]: action.payload.value\r\n\t\t\t\t\t},\r\n\t\t\t\t\trequestFailed: false,\r\n\t\t\t\t\trequestFailMessage: null\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\t\t\t\t\r\n\t\tcase PROFILE_FORM_RESET:\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tprofile: {\r\n\t\t\t\t\t...store.profile,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.profile.form,\r\n\t\t\t\t\t\tname: store.currentUser.name,\r\n\t\t\t\t\t\temail: store.currentUser.email\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\r\n\t\tcase LOGIN_REQUEST:\t\t\r\n\t\tcase GET_USER_REQUEST:\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tcurrentUser: {\r\n\t\t\t\t\t...store.currentUser,\r\n\t\t\t\t\tuserIsLoading: true\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\t    \r\n\t\tcase GET_USER_REQUEST_SUCCESS: \r\n\t\tcase PATCH_USER_REQUEST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tprofile: {\r\n\t\t\t\t\t...store.profile,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.profile.form,\r\n\t\t\t\t\t\temail: action.payload.user.email,\r\n\t\t\t\t\t\tname: action.payload.user.name\r\n\t\t\t\t\t},\r\n\t\t\t\t\trequestSuccess: true,\r\n\t\t\t\t\trequestFailed: false,\r\n\t\t\t\t\trequestFailMessage: null\r\n\t\t\t\t},\r\n\t\t\t\tcurrentUser: action.payload.user\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\t\r\n\t\tcase GET_USER_REQUEST_FAILED:\r\n\t\t\treturn {\r\n\t\t\t\t...store,\r\n\t\t\t\tprofile: {\r\n\t\t\t\t\t...store.profile,\t\t\t\t\t\t\r\n\t\t\t\t\trequestFailed: true,\r\n\t\t\t\t\trequestFailMessage: action.payload.message\t\r\n\t\t\t\t},\r\n\t\t\t\tcurrentUser: {\r\n\t\t\t\t\t...store.currentUser,\r\n\t\t\t\t\tuserIsLoading: false\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t};\t\r\n\t\tcase LOGOUT_REQUEST: {\r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\t\t\t\t\r\n\t\t\t\tlogout: {\r\n\t\t\t\t\t...store.logout,\r\n\t\t\t\t\trequestInProgress: true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\tcase LOGOUT_REQUEST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...store,\t\r\n\t\t\t\tcurrentUser: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\temail: '',\r\n\t\t\t\t\tuserIsLoading: false\r\n\t\t\t\t},\r\n\t\t\t\tlogout: {\r\n\t\t\t\t\t...store.logout,\r\n\t\t\t\t\trequestSuccess: true,\r\n\t\t\t\t\trequestInProgress: false\r\n\t\t\t\t},\r\n\t\t\t\tlogin: {\r\n\t\t\t\t\t...store.login,\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\t...store.login.form,\r\n\t\t\t\t\t\temail: '',\r\n\t\t\t\t\t\tpassword: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t};\t\t\t\r\n\t\tdefault: \r\n\t\t\treturn store;\t\t\r\n\t}\r\n}","import { TWsOrder } from '../../types';\r\n\r\nexport const WS_CONNECTION_START = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_STOP = 'WS_CONNECTION_STOP';\r\nexport const WS_CONNECTION_SUCCESS = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_MESSAGE = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE = 'WS_SEND_MESSAGE';\r\n\r\n\r\nexport interface IwsConnectionStart {\r\n\treadonly type: typeof WS_CONNECTION_START;\r\n\tpayload: {\r\n\t\twsUrl: string;\r\n\t\ttoken: string;    \r\n\t}\t\r\n}\r\nexport interface IwsConnectionStop {\r\n\treadonly type: typeof WS_CONNECTION_STOP;\t\r\n}  \r\nexport interface IwsConnectionSuccess {\r\n\treadonly type: typeof WS_CONNECTION_SUCCESS;\r\n\tpayload: Event;\r\n}\r\nexport interface IwsConnectionError {   \r\n\treadonly type: typeof WS_CONNECTION_ERROR;\r\n\tpayload: Event;\r\n}  \r\nexport interface IwsConnectionClosed {\r\n\treadonly type: typeof WS_CONNECTION_CLOSED;\r\n\tpayload: Event;\r\n}\r\nexport interface IwsGetMessage {    \r\n\treadonly type: typeof WS_GET_MESSAGE;\r\n\tpayload: {\r\n\t\ttotal: number,\r\n\t\ttotalToday: number,\r\n\t\torders: TWsOrder[]\r\n\t};\r\n}\r\n\r\nexport interface IwsSendMessage {   \r\n\treadonly type: typeof WS_SEND_MESSAGE;\r\n\tpayload: string;\r\n}\r\n  \r\nexport type TwsActions =\r\n\tIwsConnectionStart\r\n\t| IwsConnectionStop\r\n\t| IwsConnectionSuccess\r\n\t| IwsConnectionError\r\n\t| IwsConnectionClosed\r\n\t| IwsGetMessage\r\n\t| IwsSendMessage;\r\n\r\n\r\nexport interface IwsActions {\r\n    wsStart: typeof WS_CONNECTION_START,\r\n    wsStop: typeof WS_CONNECTION_STOP,\r\n    onOpen: typeof WS_CONNECTION_SUCCESS,\r\n    onClose: typeof WS_CONNECTION_CLOSED,\r\n    onError: typeof WS_CONNECTION_ERROR,\r\n    onMessage: typeof WS_GET_MESSAGE\r\n}\r\n\r\nexport const wsActions: IwsActions = {\r\n    wsStart: WS_CONNECTION_START,\r\n    wsStop: WS_CONNECTION_STOP,\r\n    onOpen: WS_CONNECTION_SUCCESS,\r\n    onClose: WS_CONNECTION_CLOSED,\r\n    onError: WS_CONNECTION_ERROR,\r\n    onMessage: WS_GET_MESSAGE\r\n}","import { TwsActions } from \"../../services/actions/wsActions\";\r\nimport { TWsOrder } from \"../../types\";\r\n\r\nimport {\r\n\tWS_CONNECTION_START,\r\n\tWS_CONNECTION_SUCCESS,\r\n\tWS_CONNECTION_ERROR,\r\n\tWS_CONNECTION_CLOSED,    \r\n\tWS_GET_MESSAGE\t\r\n} from '../actions/wsActions';\r\n\r\ntype TConstructorStateWs = {\r\n\twsConnected: boolean,\r\n\tordersArray: TWsOrder[],\r\n\ttotalOrders: number,\r\n\ttotalOrdersToday: number | undefined\r\n}\r\n\r\nconst initialState: TConstructorStateWs = {\r\n\twsConnected: false,\r\n\tordersArray: [],\r\n\ttotalOrders: 0,\r\n\ttotalOrdersToday: 0\r\n}\r\n\r\nexport const wsReducer = (state = initialState, action: TwsActions): TConstructorStateWs => {\r\n\tswitch(action.type) {\r\n\t\tcase WS_CONNECTION_START : \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: false\r\n\t\t\t};\t\r\n\t\tcase WS_CONNECTION_SUCCESS : \t\t\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: true\r\n\t\t\t};\t\r\n\t\tcase WS_CONNECTION_ERROR : \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: false\r\n\t\t\t};\t    \r\n\t\tcase WS_CONNECTION_CLOSED : \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: false\r\n\t\t\t};\t    \r\n\t\tcase WS_GET_MESSAGE: \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttotalOrders: action.payload.total,\r\n                totalOrdersToday: action.payload.totalToday,\r\n                ordersArray: action.payload.orders\r\n\t\t\t};\t    \t\r\n\t\tdefault:\r\n\t\t\treturn state;    \r\n\t}\r\n\t\r\n}\r\n\r\n","import { combineReducers } from 'redux';\r\nimport { ingredientsReducer } from './ingredients';\r\nimport { cartReducer} from './cart';\r\nimport { userReducer} from './user';\r\nimport { wsReducer} from './wsReducer';\r\n\r\n// Корневой редьюсер\r\nexport const rootReducer = combineReducers({\r\n\tingredients: ingredientsReducer,\r\n\tcart: cartReducer,\r\n\tuser: userReducer,\r\n    ws: wsReducer\r\n});","import thunk, {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport { compose, createStore, applyMiddleware, ActionCreator, Action, Dispatch } from 'redux';\r\nimport { rootReducer } from './reducers/index';\r\nimport {  TypedUseSelectorHook,\r\n\tuseSelector as selectorHook,\r\n\tuseDispatch as dispatchHook,\r\n} from 'react-redux';\r\nimport { TwsActions } from '../services/actions/wsActions';\r\nimport { socketMiddleware } from './socketMiddleware';\r\n\r\nimport { TCartActions } from './actions/cart';\r\nimport { TIngredientsActions } from './actions/ingredients';\r\nimport { TUserActions } from './actions/user';\r\nimport { wsActions} from  './actions/wsActions';\r\n\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\t__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n\t}\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n\r\nexport const wsUrlMyOrders = 'wss://norma.nomoreparties.space/orders';\r\nexport const wsUrlAllOrders = 'wss://norma.nomoreparties.space/orders/all';\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware(wsActions)));\r\n\r\n\r\nexport const store = createStore(rootReducer, enhancer); \r\n\r\nexport type TApplicationActions = TCartActions | TIngredientsActions | TUserActions | TwsActions;\r\n// Типизация thunk'ов в нашем приложении\r\nexport type TAppThunk<TReturn = void> = ActionCreator<\r\n  ThunkAction<TReturn, Action, TRootState, TApplicationActions>\r\n>; \r\n\r\n// Типизация метода dispatch для проверки на валидность отправляемого экшена\r\nexport type TAppDispatch = Dispatch<TApplicationActions>; \r\n\r\nexport type TRootState = ReturnType<typeof store.getState>;\r\n\r\nexport const useSelector: TypedUseSelectorHook<TRootState> = selectorHook;\r\n\r\nexport const useDispatch = () => dispatchHook<TAppDispatch | TAppThunk>();","import type { Middleware, MiddlewareAPI } from 'redux';\r\n\r\nimport type { TAppDispatch, TRootState } from './store';\r\nimport { IwsActions } from './actions/wsActions';\r\n\r\nexport const socketMiddleware = (wsActions: IwsActions): Middleware => {\r\n\treturn ((store: MiddlewareAPI<TAppDispatch, TRootState>) => {\r\n\t\tlet socket: WebSocket | null = null;\r\n\r\n\t\treturn  next => (action) => {\r\n\t\t\tconst { dispatch, getState } = store;\r\n\t\t\tconst { type, payload } = action;\r\n\t\t\tconst { wsStart, wsStop, onOpen, onClose, onError, onMessage } = wsActions;\r\n\t\r\n\t\t\t//Подключаем сокет только если он не был создан или был закрыт\r\n\t\t\tif (type === wsStart && (socket === null || socket.readyState === 3)) {\t\t\t\t\t\r\n\t\t\t\tsocket = new WebSocket(payload.wsUrl + ((typeof payload.token !== 'undefined') ? '?token=' + payload.token : ''));\r\n\t\t\t\t\r\n\t\t\t\tif (socket) {\r\n\r\n\t\t\t\t\t// функция, которая вызывается при открытии сокета\r\n\t\t\t\t\tsocket.onopen = event => {\r\n\t\t\t\t\t\tdispatch({type: onOpen, payload: event});\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\t// функция, которая вызывается при ошибке соединения\r\n\t\t\t\t\tsocket.onerror = event => {\r\n\t\t\t\t\t\tdispatch({ type: onError, payload: event });\r\n\t\t\t\t\t};\t\t\t\r\n\t\r\n\t\t\t\t\t// функция, которая вызывается при закрытии соединения\r\n\t\t\t\t\tsocket.onclose = (event: CloseEvent) => {\r\n\t\t\t\t\t\tdispatch({ type: onClose, payload: event });\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\t// функция, которая вызывается при получения события от сервера\r\n\t\t\t\t\tsocket.onmessage = (event: MessageEvent) => {              \r\n\t\t\t\t\t\tdispatch({type: onMessage, payload: JSON.parse(event.data)});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(socket && type === wsStop) {\r\n\t\t\t\tsocket.close();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tnext(action);\r\n\t\t};\r\n\t}) as Middleware;\r\n};","import React, {FC} from 'react'\r\nimport styles from './ingredient.module.css'\r\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TIngredient } from '../../../../types';\r\nimport { useSelector } from '../../../../services/store';\r\nimport { useDrag } from 'react-dnd';\r\nimport { useLocation } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nexport default function Ingredient({ingredientObj}: {ingredientObj: TIngredient}) {\r\n\r\n\tconst cartIngredients = useSelector((store) => store.cart.cartIngredients) || [];\r\n\tconst location = useLocation();\r\n\r\n\tlet amount = cartIngredients.filter((item) => item._id === ingredientObj._id).length;\r\n\tif (ingredientObj.type === 'bun') {\r\n\t\tamount *= 2;\r\n\t}\r\n\t\r\n\tconst [{opacity}, dragRef] = useDrag({\r\n        type: \"ingredient\",\r\n        item: ingredientObj,\r\n        collect: monitor => ({\r\n\t\t\topacity: monitor.isDragging() ? 0.2 : 1\r\n        })\r\n    });\r\n\r\n\treturn (\t\t\r\n\t\t<div className = {styles.container} ref={dragRef} style={{opacity}} data-test=\"ingredient_container\">\r\n\t\t\t<Link\r\n\t\t\t\tclassName={styles.link}\r\n\t\t\t\tto={{\r\n\t\t\t\t\tpathname: `/ingredients/${ingredientObj._id}`,\r\n\t\t\t\t\tstate: {prevLocation: location}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{amount > 0 && <Counter count={amount} size=\"default\" />} \t\t\t\r\n\t\t\t\t<img className = {styles.image} src={ingredientObj.image} alt={ingredientObj.name}/>\r\n\t\t\t\t<div className = {styles.price}>\r\n\t\t\t\t\t<span className = \"text_type_digits-default pr-1\">\r\n\t\t\t\t\t\t{ingredientObj.price}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<CurrencyIcon type = \"primary\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = {`${styles.itemName} text_type_main-default`}>\r\n\t\t\t\t\t{ingredientObj.name}\t\t\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\t\t\r\n\t\t</div>\t\r\n\t\t\r\n\t)\r\n}\r\n","import React, { Component } from 'react'\r\nimport Ingredient from './ingredient/ingredient'\r\nimport styles from './group.module.css'\r\nimport { TIngredient } from '../../../types/index';\r\n\r\nexport default function Group({id, title, ingredients}: {id: string, title: string, ingredients: TIngredient[]}) {\r\n\treturn (\r\n\t\t<>\r\n\t\t  \t<h2 className = \"text_type_main-medium\" id = {id}>{title}</h2>\r\n\t\t\t<div className = {styles.container}>         \r\n\t\t\t\t{ingredients.map((ingredient, index)=>(\r\n\t\t\t\t\t<Ingredient \r\n\t\t\t\t\t\tkey = {ingredient._id}\r\n\t\t\t\t\t\tingredientObj = {ingredient}\t\t\t\t\t\t\r\n\t\t\t\t\t/>\r\n\t\t\t\t))} \r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n} ","import React, { useRef, useState, createRef, useMemo, FC } from 'react';\r\nimport {Tab} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport styles from './burger-ingredients.module.css';\r\nimport Group from './group/group';\r\nimport IngredientDetails from '../ingredients-details/ingredients-details';\r\nimport Modal from '../modal/modal';\r\nimport { useSelector } from '../../services/store';\r\nimport { TIngredient } from '../../types';\r\n\r\nexport default function BurgerIngredients() {\r\n\r\n\tconst groupsArr = [\r\n\t\t{type: 'bun', name: 'Булки'}, \r\n\t\t{type: 'sauce', name: 'Соусы'}, \r\n\t\t{type: 'main', name: 'Начинки'},        \r\n\t];    \r\n\r\n\tconst [activeTab, setActiveTab] = useState('bun');\r\n \r\n\tconst ingredientsAll = useSelector((store) => store.ingredients.ingredientsAll) || [];\t\r\n\t\r\n\tconst onTabClick = (tab: string) => {\r\n\t\tsetActiveTab(tab);\t\r\n\t\tconst group = document.getElementById('group_' + tab);\t\t\r\n\t\tif (group) {\r\n\t\t\tgroup.scrollIntoView({ behavior: \"smooth\" });\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleScroll = (e: React.MouseEvent<HTMLDivElement>) => {\r\n\r\n\t\tconst topElement = e.currentTarget as HTMLElement;\r\n\t\tconst topY: number = topElement.offsetTop;\r\n\t\t// console.log('topY', topY);\r\n\t\t// console.log(document.getElementById('group_bun').getBoundingClientRect().y);\r\n\t\t// console.log(document.getElementById('group_sauce').getBoundingClientRect().y);\r\n\t\t// console.log(document.getElementById('group_main').getBoundingClientRect().y);\r\n\r\n\t\tconst nearestGroup = groupsArr.reduce((a, b) => {\t\t\t\t\r\n\r\n\t\t\tconst groupBoxA: HTMLElement | null =  document.getElementById('group_' + a.type),\r\n\t\t\t\t\tgroupBoxB: HTMLElement | null =  document.getElementById('group_' + b.type)\r\n\r\n\t\t\tif(groupBoxA && groupBoxB) {\r\n\t\t\t\treturn (Math.abs(groupBoxA.getBoundingClientRect().y - topY) <\r\n\t\t\t\tMath.abs(groupBoxB.getBoundingClientRect().y - topY)) ?\r\n\t\t\t\ta : b;\t\t\t\r\n\t\t\t}\r\n\t\t\treturn a;\t\t\t\r\n\t\t});\r\n\t\t\t\t\r\n        setActiveTab(nearestGroup.type);\r\n    }\r\n   \r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className = {`${styles.container} pt-10`}>\r\n\t\t\t\t<h1 className = \"text_type_main-large\">Соберите бургер</h1>\r\n\t\t\t\t<nav className = {styles.tabs}>          \r\n\t\t\t\t\t{groupsArr.map((group, index) => (\r\n\t\t\t\t\t\t<Tab \r\n\t\t\t\t\t\t\tkey = {index}\r\n\t\t\t\t\t\t\tonClick = {() => onTabClick(group.type)}\r\n\t\t\t\t\t\t\tactive = {group.type === activeTab}  \r\n\t\t\t\t\t\t\tvalue = {group.type}\t\r\n\t\t\t\t\t\t>                             \r\n\t\t\t\t\t\t\t\t{group.name}\r\n\t\t\t\t\t\t</Tab>        \r\n\t\t\t\t\t))}                    \r\n\t\t\t\t</nav>\r\n\t\t\t\t<section \r\n\t\t\t\t\t\tclassName = {`${styles.groups} custom-scroll`}  \r\n\t\t\t\t\t\tonScroll={(e: React.MouseEvent<HTMLDivElement>) => handleScroll(e)}>\r\n\t\t\t\t\t{groupsArr.map((group, index) => (\r\n\t\t\t\t\t\t<Group \r\n\t\t\t\t\t\t\tkey = {index} \r\n\t\t\t\t\t\t\ttitle = {group.name}                          \r\n\t\t\t\t\t\t\tingredients = {ingredientsAll.filter((ingr: TIngredient) => group.type === ingr.type)} \r\n\t\t\t\t\t\t\tid = {'group_' + group.type}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}               \r\n\t\t\t\t</section>            \r\n\t\t\t</div>  \r\n\t\t</>    \r\n\t)\r\n}\r\n\r\n","import React, { useRef } from 'react'\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './drag-element.module.css';\r\nimport { DELETE_INGREDIENT, MOVE_CART_INGREDIENT } from '../../../services/actions/cart';\r\nimport { useDispatch } from '../../../services/store';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport { TIngredientCart } from '../../../types';\r\n\r\nexport default function DragElement(props: {ingredient: TIngredientCart, index: number}) {\r\n\r\n\tconst dispatch = useDispatch();\t\r\n\tconst ref = useRef<HTMLDivElement>(null);\r\n\t\r\n\tconst handleDelete = () => {\r\n\t\tdispatch({\r\n\t\t\ttype: DELETE_INGREDIENT,\r\n\t\t\tpayload: props.ingredient\r\n\t\t})\r\n\t}\r\n\r\n\tconst [{isDrag}, dragRef] = useDrag({\r\n\t\ttype: \"cartIngredient\",\r\n\t\titem: {index: props.index},\r\n\t\tcollect: monitor => ({\r\n\t\t\tisDrag: monitor.isDragging()\r\n\t\t})\r\n\t});\r\n\r\n\tconst [{isOver}, dropRef] = useDrop({\r\n\t\taccept: \"cartIngredient\",\r\n\t\tcollect: monitor => ({\r\n\t\t\tisOver: monitor.isOver()\r\n\t\t}),\r\n\t\thover(ingredient: TIngredientCart, monitor) {\r\n\t\t\tconst dragIndex = ingredient.index;\r\n\t\t\tconst hoverIndex = props.index;\r\n\t\t\tif (dragIndex === hoverIndex) return;\r\n\r\n\t\t\tconst draggableEl = ref.current;\t\r\n\t\t\tif(draggableEl) {\r\n\t\t\t\tconst hoverBoundingRect: DOMRect  = draggableEl.getBoundingClientRect();\r\n\t\t\t\tconst hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n\t\t\t\tconst clientOffset = monitor.getClientOffset();\r\n\t\t\t\tif (clientOffset) {\r\n\t\t\t\t\tconst hoverActualY = clientOffset.y - hoverBoundingRect.top;\r\n\t\t\t\t\t// if dragging down, continue only when hover is smaller than middle Y\r\n\t\t\t\t\tif (dragIndex < hoverIndex && hoverActualY < hoverMiddleY) return;\r\n\t\t\t\t\t// if dragging up, continue only when hover is bigger than middle Y\r\n\t\t\t\t\tif (dragIndex > hoverIndex && hoverActualY > hoverMiddleY) return;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\t\t\t\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MOVE_CART_INGREDIENT,\r\n\t\t\t\tpayload: { dragIndex, hoverIndex }\r\n\t\t\t});\t\t\t\t\r\n\t\t\t\r\n\t\t\tingredient.index = hoverIndex;\r\n\t\t}\r\n\t});\r\n\r\n\tdragRef(dropRef(ref));\r\n\r\n\treturn (\t\t\r\n\t\t<div \r\n\t\t\tclassName = {styles.container} \r\n\t\t\tref={ref} \r\n\t\t\tstyle={{\r\n\t\t\t\tborder: isOver ? \"1px dashed green\" : '',\r\n\t\t\t\topacity: isDrag ? 0.2 : 1\r\n\t\t\t}} >\r\n\t\t\t\t<div className = {styles.drag_icon}>\t\t\t  \r\n\t\t\t\t\t<DragIcon type=\"primary\"/>\t\t\t  \r\n\t\t\t\t</div>          \t\t\r\n\t\t\t\t<ConstructorElement\t\t\t\r\n\t\t\t\t\ttext = {props.ingredient.name}\r\n\t\t\t\t\tthumbnail = {props.ingredient.image_mobile}\r\n\t\t\t\t\tprice = {props.ingredient.price}\r\n\t\t\t\t\tisLocked = {false}\r\n\t\t\t\t\thandleClose={() => handleDelete()} \t\t\t\t\r\n\t\t\t\t/>\r\n\t\t</div>\r\n  \t)\r\n}\r\n","import React, { Component } from 'react'\r\nimport styles from './cart-total.module.css'\r\nimport { Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector } from '../../../services/store';\r\nimport { TIngredientCart } from '../../../types';\r\n\r\n\r\nexport default function CartTotal(props: {total: number, showOrderDetails: () => void}) {\r\n\r\n\tlet cartIngredients = useSelector((store) => store.cart.cartIngredients) || [];\r\n\r\n\treturn (\r\n\t\t<div className = {`${styles.container} mt-10`}>\r\n\t\t\t<div className = \"text_type_digits-medium mr-2\">\r\n\t\t\t\t{props.total}\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className = {styles.currency}>\r\n\t\t\t\t<CurrencyIcon type = \"primary\"/>\r\n\t\t\t</div>\t\t\t\r\n\t\t\t<div className = \"pl-10\" data-testid = \"place_order_button\">\r\n\t\t\t\t{ cartIngredients.some((item: TIngredientCart) => item.type === 'bun') ? (\r\n\t\t\t\t\t<Button  \r\n\t\t\t\t\t\ttype = \"primary\" \r\n\t\t\t\t\t\tsize = \"large\"\t\t\t\t\t\t\r\n\t\t\t\t\t\tonClick = {props.showOrderDetails}>\r\n\t\t\t\t\t\t\tОформить заказ\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t) : (null) }\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, {FC, MouseEventHandler} from \"react\";\r\nimport styles from './modal-overlay.module.css'\r\n\r\ninterface IModalOverlay {\t\r\n\tonModalClose: () => void\r\n}\r\n\r\n\r\nexport const ModalOverlay: FC<IModalOverlay> = ({onModalClose, children}) =>{\r\n\r\n    const closeOnClickOverlay: MouseEventHandler<HTMLDivElement> = (event) => {\r\n        if (event.target === event.currentTarget) {\r\n            onModalClose();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div \r\n            className = {styles.overlay}             \r\n            onClick = {closeOnClickOverlay}\r\n\t\t\tdata-testid=\"modal_overlay\">\r\n\r\n          {children}\r\n        </div>\r\n      )\r\n\r\n}\r\n\r\nexport default ModalOverlay;\r\n\r\n","import React, { FC } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './modal.module.css'\r\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\r\n\r\ninterface IModal {\r\n\ttitle?: string;\r\n\tonModalClose: () => void\r\n}\r\n\r\nexport const Modal: FC<IModal> = ({title, children, onModalClose}) => {\r\n\r\n\tReact.useEffect(() => {\r\n\t\tdocument.addEventListener(\"keydown\", closeByEscape);\t\r\n\t\treturn () => {\r\n\t\t  document.removeEventListener(\"keydown\", closeByEscape);\r\n\t\t}\r\n\t});\r\n\r\n\tconst closeByEscape = (event: KeyboardEvent) => {\r\n\t\tif (event.key === \"Escape\") {\r\n\t\t\tonModalClose();\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn ReactDOM.createPortal (\t\t\r\n\t\t<ModalOverlay onModalClose = {onModalClose}>\r\n\t\t\t<div className = {`${styles.window} pt-10 pr-10 pb-15 pl-10`}>\r\n\t\t\t\t<header className = {styles.title}>\r\n\t\t\t\t\t<p className = \"text text_type_main-medium\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</p>   \r\n\t\t\t\t\t<div className = {styles.closeButton} onClick={onModalClose} data-testid=\"modal_close_button\">\r\n\t\t\t\t\t\t<CloseIcon type=\"primary\"/>    \r\n\t\t\t\t\t</div> \t\t\t\t\t\t\t\t       \r\n\t\t\t\t</header>\r\n\t\t\t\t{children}\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</ModalOverlay>,\r\n\t\tdocument.getElementById('react-modals') as  HTMLDivElement\r\n\t)   \r\n}\r\n\r\nexport default Modal;\r\n","export default __webpack_public_path__ + \"static/media/done.f3932884.png\";","import {FC} from 'react';\r\nimport styles from './order-details.module.css';\r\nimport doneImage from '../../images/done.png'\r\n\r\ninterface IOrderDetails {\r\n\torderNumber: number;\r\n\torderStatus: string;\r\n}\r\n\r\nexport const OrderDetails: FC<IOrderDetails> = ({orderNumber, orderStatus}) => {\r\n\r\n\treturn (\r\n\t\t<div className = {styles.windowBody}>\r\n\t\t\t{orderNumber !== 0 ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className = {`${styles.centerText} text_type_digits-large `}>\r\n\t\t\t\t\t\t{orderNumber}\r\n\t\t\t\t\t</div>    \r\n\t\t\t\t\t<p className = {`${styles.centerText} mt-8 text text_type_main-medium `}>\r\n\t\t\t\t\t\tидентификатор заказа\r\n\t\t\t\t\t</p>\t\t\t\t\t\t\r\n\t\t\t\t\t<div className = {styles.centerText}>\r\n\t\t\t\t\t\t<img className = {`${styles.doneImage} mt-15`} src = {doneImage} alt = \"OK\"/>\r\n\t\t\t\t\t</div>\t\t\t\r\n\t\t\t\t\t<p className = {`${styles.centerText} mt-15 text text_type_main-small `}>\r\n\t\t\t\t\t\tВаш заказ начали готовить\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className = {`${styles.centerText} mt-2 mb-20 text text_type_main-small text_color_inactive `}>\r\n\t\t\t\t\t\tДождитесь готовности на орбитальной станции\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<h2 className='text text_type_main-large'>{orderStatus}</h2>\r\n\t\t\t)}\t\t\t\t\r\n\t\t</div>   \r\n\t)\r\n}\r\n\r\nexport default OrderDetails;\r\n\r\n","import React, { useState } from 'react';\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport DragElement from './drag-element/drag-element';\r\nimport CartTotal from './cart-total/cart-total';\r\nimport styles from './burger-constructor.module.css'\r\nimport Modal from '../modal/modal';\r\nimport OrderDetails from '../order-details/order-details';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\nimport { placeOrder } from '../../services/actions/cart';\r\nimport { useDrop } from 'react-dnd';\r\nimport { addIngredient } from '../../services/actions/cart';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { TIngredientCart } from '../../types';\r\n\r\n\r\nexport default function BurgerConstructor() {\t\r\n\t\r\n\t\r\n\tconst [showModal, setShowModal] = useState(false);\t\r\n\r\n\tlet cartIngredients: TIngredientCart[] = useSelector((store) => store.cart.cartIngredients) || [];\r\n\tconst order = useSelector((store) => store.cart.order) || {number: 0};\r\n\tconst currentUserEmail = useSelector((store) => store.user.currentUser.email);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst history = useHistory();\r\n\r\n    const openModalWindow = () => {\r\n\t\tif(!currentUserEmail) {\r\n\t\t\thistory.replace({\r\n\t\t\t\tpathname: '/login'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetShowModal(true);\t\t\t\r\n\t\tdispatch(placeOrder(cartIngredients));\t\r\n    }\r\n\tconst closeModalWindow = () => {\r\n\t\tsetShowModal(false);\r\n    }\r\n\r\n\tconst [{isHover}, dropTarget] = useDrop({\r\n        accept: \"ingredient\",\r\n        drop(ingredient: TIngredientCart) {\r\n\t\t\tdispatch(addIngredient(ingredient));\r\n        },\r\n        collect: monitor => ({\r\n            isHover: monitor.isOver(),\r\n        })\r\n    });\r\n\r\n\r\n    const borderColor = isHover ? 'lightgreen' : 'transparent';\r\n\t\r\n\r\n\tlet bun = null,\t\t\r\n\t\tcartTotal = 0,\r\n\t\tcartIngredientsWithoutBun: TIngredientCart[] = [];\r\n\r\n\tif (cartIngredients.length) {\t\t\t\t\r\n\r\n\t\tcartTotal = cartIngredients.reduce(\r\n\t\t\t(total: number, currentItem) => total + (currentItem.type === 'bun' ? currentItem.price * 2 : currentItem.price),\r\n\t\t\t0\r\n\t\t);\r\n\r\n\t\t//находим булку в ингредиентах\r\n\t\tbun = cartIngredients.find(ingr => ingr.type === 'bun');\t\t\r\n\t\t\r\n\t\t//остальные ингредиенты\r\n\t\tcartIngredientsWithoutBun = cartIngredients.filter(ingr => ingr.type !== 'bun');\r\n\t\t\t\t\t\t\t\r\n\t}\t\t\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className = {`${styles.container} pt-25 ml-10`}>\r\n\t\t\t\t<div className = {styles.dropTarget} style={{borderColor}} ref={dropTarget} data-testid=\"cart_drop_target\">\r\n\t\t\t\t\t{bun && <div className = {styles.bun}>\r\n\t\t\t\t\t\t\t\t<ConstructorElement\r\n\t\t\t\t\t\t\t\t\ttype = \"top\"\r\n\t\t\t\t\t\t\t\t\ttext={`${bun.name}\\n(верх)`}\r\n\t\t\t\t\t\t\t\t\tthumbnail = {bun.image_mobile}\r\n\t\t\t\t\t\t\t\t\tprice = {bun.price}\r\n\t\t\t\t\t\t\t\t\tisLocked = {true}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div> }\r\n\r\n\t\t\t\t\t<section className = {`${styles.drag_list} custom-scroll pr-2 mt-4 mb-4`}>\r\n\t\t\t\t\t\t{cartIngredientsWithoutBun.map((ingredient, index) => (\r\n\t\t\t\t\t\t\t<DragElement \t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tkey = {ingredient.uuid}\r\n\t\t\t\t\t\t\t\tingredient = {ingredient}\r\n\t\t\t\t\t\t\t\tindex = {index}\t\t\t\t\r\n\t\t\t\t\t\t\t/>      \r\n\t\t\t\t\t\t))}      \r\n\t\t\t\t\t</section>    \r\n\r\n\t\t\t\t\t{bun && <div className = {styles.bun}>\r\n\t\t\t\t\t\t\t\t<ConstructorElement\r\n\t\t\t\t\t\t\t\t\ttype = \"bottom\"\r\n\t\t\t\t\t\t\t\t\ttext={`${bun.name}\\n(низ)`}\r\n\t\t\t\t\t\t\t\t\tthumbnail = {bun.image_mobile}\r\n\t\t\t\t\t\t\t\t\tprice = {bun.price}\r\n\t\t\t\t\t\t\t\t\tisLocked = {true}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div> }\r\n\t\t\t\t</div>\t\t\r\n\r\n\t\t\t\t{cartTotal !== 0 ? (<CartTotal \r\n\t\t\t\t\ttotal = {cartTotal} \r\n\t\t\t\t\tshowOrderDetails = {openModalWindow}\r\n\t\t\t\t/>) : (<h2 className='text text_type_main-meduim'>Тяни сюда</h2>)}\r\n\t\t\t</div>\t\r\n\r\n\t\t\t{showModal && <Modal \t\t\t\t\t\t\r\n\t\t\t\tonModalClose = {closeModalWindow}>\r\n\t\t\t\t\t<OrderDetails \r\n\t\t\t\t\t\torderNumber = {order.number} \r\n\t\t\t\t\t\torderStatus = {order.textStatus}\r\n\t\t\t\t\t/>\r\n\t\t\t</Modal> }\r\n\t\t</>\t\r\n\t)\r\n\r\n}","import { store } from \"../services/store\";\r\n\r\nexport type TLocation = {\r\n\tpath: string;\r\n\thash: string;\r\n\thost: string;\r\n\tpathname: string;\r\n\tsearch: string;\r\n\tstate: TLocationState\r\n}\r\n\r\nexport type TLocationState = {\r\n\tstate: {\r\n\t\tprevLocation: TLocation;\r\n\t}\r\n}\r\n\r\nexport type TIngredient = {    \t\r\n\treadonly _id: string;\r\n\treadonly name: string;\r\n\treadonly type: string;\r\n\treadonly price: number;\r\n\treadonly proteins: number; \r\n\treadonly fat: number;\r\n\treadonly calories: number;\r\n\treadonly carbohydrates: number;    \r\n\treadonly image: string;    \r\n\treadonly image_mobile: string;     \r\n\treadonly image_large: string;\r\n}\r\n\r\nexport function defaultIngredient(ingredientId: string):TIngredient {\r\n\treturn {\r\n\t\t_id: ingredientId,\r\n\t\tname: 'missing',\r\n\t\ttype: 'missing',\r\n\t\tprice: 0,\r\n\t\tproteins: 0,\r\n\t\tfat: 0,\r\n\t\tcalories: 0,\r\n\t\tcarbohydrates: 0,\r\n\t\timage: 'missing',\r\n\t\timage_mobile: 'missing',\r\n\t\timage_large: 'missing'\r\n\t}   \r\n}\r\n\r\nexport type TIngredientCart = TIngredient & {\r\n\tuuid: string; \r\n\tindex: number;\r\n} \r\n\r\nexport interface IUserRequest {\r\n\temail: string;\r\n\tname: string;\r\n\tpassword: string;\r\n\tuserIsLoading?: boolean; \r\n}\r\n\r\nexport type TOrder = {\r\n\t_id: string;\r\n\tstatus: string;\r\n\tname: string;\r\n\tcreatedAt: string;\r\n\tupdatedAt: string;\r\n\tnumber: number;\r\n\tingredients: TIngredient[];\r\n}\r\n\r\nexport type TWsOrder = Omit<TOrder, 'ingredients'> & { ingredients: string[]}; \r\n\r\nexport enum OrderStatuses {    \r\n\tcreated = 'created',\r\n\tpending = 'pending',\r\n\tdone = 'done'\r\n}\r\n\r\nexport type CustomHeaders = {\r\n\tAuthorization: string;\r\n\t\"Content-Type\": string;\r\n}\r\n\r\n","import styles from './ingredients-details.module.css';\r\nimport { useSelector } from '../../services/store';\r\nimport { useParams } from 'react-router';\r\nimport { TIngredient } from '../../types';\r\n\r\nexport default function IngredientDetails() {\r\n\r\n\tconst ingredientsAll = useSelector((store) => store.ingredients.ingredientsAll) || [];   \r\n\tconst { id }: {id: string}  = useParams();\r\n\r\n\tconst ingredientObj = ingredientsAll.find((item: TIngredient )  => item._id === id);\r\n\r\n\treturn (\r\n\t\tingredientObj ? (\r\n\t\t\t<div className = {styles.windowBody}>\r\n\t\t\t\t<img src={ingredientObj.image_large} alt={ingredientObj.name}/>             \r\n\t\t\t\t<div className = \"mt-4 text text_type_main-default\">\r\n\t\t\t\t\t{ingredientObj.name}\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul className = {`${styles.calories} mt-8`}>\r\n\t\t\t\t\t<li className = {styles.caloriesItem}>\r\n\t\t\t\t\t\t<div className = \"text text_type_main-small text_color_inactive\">\r\n\t\t\t\t\t\t\tКалории, калл\r\n\t\t\t\t\t\t</div>       \r\n\t\t\t\t\t\t<div className = \"text text_type_digits-default text_color_inactive\">\r\n\t\t\t\t\t\t\t{ingredientObj.calories}\r\n\t\t\t\t\t\t</div>                                  \r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className = {styles.caloriesItem}>\r\n\t\t\t\t\t\t<div className = \"text text_type_main-small text_color_inactive\">\r\n\t\t\t\t\t\t\tБелки, г\r\n\t\t\t\t\t\t</div>       \r\n\t\t\t\t\t\t<div className = \"text text_type_digits-default text_color_inactive\">\r\n\t\t\t\t\t\t\t{ingredientObj.proteins}\r\n\t\t\t\t\t\t</div>                                  \r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className = {styles.caloriesItem}>\r\n\t\t\t\t\t\t<div className = \"text text_type_main-small text_color_inactive\">\r\n\t\t\t\t\t\t\tЖиры, г\r\n\t\t\t\t\t\t</div>       \r\n\t\t\t\t\t\t<div className = \"text text_type_digits-default text_color_inactive\">\r\n\t\t\t\t\t\t\t{ingredientObj.fat}\r\n\t\t\t\t\t\t</div>                                  \r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className = {styles.caloriesItem}>\r\n\t\t\t\t\t\t<div className = \"text text_type_main-small text_color_inactive\">\r\n\t\t\t\t\t\t\tУглеводы, г\r\n\t\t\t\t\t\t</div>       \r\n\t\t\t\t\t\t<div className = \"text text_type_digits-default text_color_inactive\">\r\n\t\t\t\t\t\t\t{ingredientObj.carbohydrates}\r\n\t\t\t\t\t\t</div>                                  \r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\t\t\t\r\n\t\t\t</div> \r\n\t\t) : (\r\n\t\t\t<h1 className='text text_type_main-large'> Загрузка...</h1>\r\n\t\t)\r\n\t);\r\n}\r\n\r\n\r\n\r\n","export function formatDate(dateString: string) {\r\n    return new Date(dateString).toLocaleTimeString('ru-RU', {month: 'long', hour: 'numeric', minute: 'numeric'})\r\n}","import React, {useEffect, useState} from 'react';\r\nimport { TWsOrder, TIngredient, defaultIngredient, OrderStatuses } from '../../types';\r\nimport { baseUrl } from '../../services/rest-api';\r\nimport { checkResponse } from '../../utils/api';\r\nimport { useParams } from 'react-router';\r\nimport styles from './order-info.module.css';\r\nimport { useSelector } from '../../services/store';\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { formatDate } from '../../utils/date';\r\n\r\nexport default function OrderInfo() {\r\n\tconst { orderNumber }: {orderNumber: string}  = useParams();\r\n\tconst [order, setOrder] = useState<TWsOrder>();\r\n\tconst [loadingError, setLoadingError] = useState('');\r\n\r\n\tconst { ingredientsAll } = useSelector((store) => store.ingredients);\t\r\n\r\n\tconst orderPath = '/orders/' + orderNumber;\t\r\n\tlet orderStatus = 'Неизвестно',\r\n\t\tfullIngredients: TIngredient[] = [],\r\n\t\tcountIngredients: { [key: string]: { ingredient: TIngredient; quantity: number } } = {},\r\n\t\ttotalCost = 0,\r\n        orderDate = '';\r\n\r\n\tuseEffect(() => {\t\t\r\n\t\tconst getOrder = () => {\r\n\t\t\tfetch(baseUrl + orderPath)\r\n\t\t\t\t.then(checkResponse) \r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\t\tif(res.orders && res.orders[0]) {\r\n\t\t\t\t\t\t\tsetOrder(res.orders[0]);     \r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tsetLoadingError('Ошибка при загрузке');\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tsetLoadingError('Ошибка при загрузке');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tsetLoadingError('Ошибка при загрузке');\r\n\t\t\t\t})\t\r\n\t\t}\r\n\t\tgetOrder();\t\t\r\n\t}, []);\r\n\r\n\tif(order && ingredientsAll) {\r\n\t\tfullIngredients = order.ingredients.map((ingredientId) => {\t\t\t\t\t\r\n\t\t\tconst fullIngredient = ingredientsAll.find((ingredient) => ingredient._id === ingredientId);\r\n\r\n\t\t\tif(typeof countIngredients[ingredientId] !== 'undefined' && fullIngredient) {\r\n\t\t\t\tcountIngredients[ingredientId].quantity++;\r\n\t\t\t}else if (fullIngredient) {\r\n\t\t\t\tcountIngredients[ingredientId] = {\r\n\t\t\t\t\tingredient: fullIngredient,\r\n\t\t\t\t\tquantity: fullIngredient.type === 'bun' ? 2 : 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn fullIngredient ? fullIngredient : defaultIngredient(ingredientId);\r\n\r\n\t\t});\t\t\r\n\r\n\t\t\r\n\t\tif(order.status === OrderStatuses.done) {\r\n\t\t\torderStatus = 'Выполнен';\r\n\t\t}else if(order.status === OrderStatuses.pending){\r\n\t\t\torderStatus = 'Готовится';\r\n\t\t}else if(order.status === OrderStatuses.created){\r\n\t\t\torderStatus = 'Создан';\r\n\t\t}\r\n\r\n\t\torderDate = formatDate(order.createdAt)\r\n\r\n\t\ttotalCost = fullIngredients.reduce((total: number, currentItem) => {\t\t\r\n\t\t\treturn currentItem ? total + (currentItem.type === 'bun' ? currentItem.price * 2 : currentItem.price) : 0;\r\n\t\t}, 0);\r\n\r\n\t}\r\n   \r\n\r\n\treturn (\r\n\t\torder ? (\r\n\t\t\t<div className = {styles.container}>\r\n\t\t\t\t<h3 className={`${styles.orderNumber} text text_type_digits-default`}>#{order.number}</h3>\r\n\t\t\t\t<h2 className='text text_type_main-medium mt-10'>{order.name}</h2>\r\n\t\t\t\t<p className={`${order.status === OrderStatuses.done ? styles.readyOrder: null} text text text_type_main-small mt-3`}>{orderStatus}</p>\r\n\t\t\t\t<h4 className=\"text text_type_main-medium mt-15\">Состав:</h4>\r\n\t\t\t\t{\r\n\t\t\t\t\t<ul className={`${styles.ingredientList} mt-6 custom-scroll`}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tObject.values(countIngredients).map((item) => (\r\n\t\t\t\t\t\t\t\t<li className={`${styles.ingredientRow} mt-4`} key={item.ingredient._id}>\r\n\t\t\t\t\t\t\t\t\t<img className={styles.ingrImage} src={item.ingredient.image} alt={item.ingredient.name}/>\r\n\t\t\t\t\t\t\t\t\t<div className={`${styles.titlePriceContainer} pr-6`}>\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"text text text_type_main-small pl-4\">{item.ingredient.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t<div className={styles.price}>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text text_type_digits-default pr-1\">{item.quantity} x {item.ingredient.price}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<CurrencyIcon type=\"primary\"/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t}\r\n\t\t\t\t<div className={`${styles.bottom} mt-10`}>\r\n\t\t\t\t\t<p className=\"text text_type_main-default text_color_inactive\">{orderDate}</p>\r\n\t\t\t\t\t<div className={styles.total}>\r\n\t\t\t\t\t\t<span className=\"text text_type_digits-default pr-1\">{totalCost}</span>\r\n\t\t\t\t\t\t<CurrencyIcon type=\"primary\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t) : (\r\n\t\t\tloadingError ? <h1> {loadingError} </h1> : <h1 className='text text_type_main-large'> Загрузка...</h1>\r\n\t\t)\r\n\t);\r\n}","import React from 'react';\r\nimport styles from './common.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, useLocation, Redirect } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../services/store';\r\nimport { setLoginFormValue, login } from '../services/actions/user';\r\nimport { TLocationState } from '../types/index';\r\n\r\n\r\nexport function LoginPage() {\r\n\r\n\tconst { email, password } = useSelector((store) => store.user.login.form);\r\n\tconst { requestFailed, requestFailMessage } = useSelector((store) => store.user.login);\r\n\tconst currentUser = useSelector((store) => store.user.currentUser);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst location: TLocationState = useLocation();\r\n\r\n\tif(currentUser.email && !currentUser.userIsLoading) {\r\n\t\treturn <Redirect to = {location.state?.prevLocation || '/'} />;\r\n\t}\r\n\r\n\tconst onFormChange = (e: React.ChangeEvent<HTMLInputElement>) => {\t\t\t\r\n\t\tdispatch(setLoginFormValue(e.target.name, e.target.value));\r\n\t}\r\n\r\n\tconst onFormSubmit = (e: React.FormEvent) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(login({ email, password }));\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div className={styles.container}>\r\n\t\t\t<form className={styles.form} onSubmit={onFormSubmit}>\r\n\t\t\t\t<h1 className=\"text_type_main-medium\">Вход</h1>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input \r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname=\"email\" \r\n\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\tplaceholder=\"E-mail\"\r\n\t\t\t\t\t\terror={requestFailed}\r\n\t\t\t\t\t\terrorText={requestFailMessage ? requestFailMessage: undefined}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<PasswordInput \r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname={'password'} \r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>    \r\n\t\t\t\t<div className=\"mt-6\" data-testid=\"login_submit_button\">\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" size=\"large\">\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"text_type_main-default text_color_inactive mt-20\">\r\n\t\t\t\t\tВы — новый пользователь?\r\n\t\t\t\t\t<Link to=\"/register\" className=\"pl-2\">\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<p className=\"text_type_main-default text_color_inactive mt-4\">\r\n\t\t\t\t\tЗабыли пароль?\r\n\t\t\t\t\t<Link to=\"/forgot-password\" className=\"pl-2\">\r\n\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport styles from './common.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from '../services/store';\r\nimport { setRegisterFormValue, register } from '../services/actions/user';\r\nimport { TLocationState } from '../types/index';\r\n \r\nexport function RegisterPage() {\r\n\r\n\tconst { name, email, password } = useSelector((store) => store.user.registration.form);\r\n\tconst { requestFailed, requestFailMessage } = useSelector((store) => store.user.registration);\r\n\tconst currentUserEmail = useSelector((store) => store.user.currentUser.email);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst location: TLocationState = useLocation();\r\n\r\n\tif(currentUserEmail) {\r\n\t\treturn <Redirect to = {location.state?.prevLocation || '/'} />;\r\n\t}\r\n\r\n\tconst onFormChange = (e: React.ChangeEvent<HTMLInputElement>) => {\t\t\t\r\n        dispatch(setRegisterFormValue(e.target.name, e.target.value));\r\n    }\r\n\r\n\tconst onFormSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        dispatch(register({name, email, password}));\r\n    }\r\n\r\n\t//переадресация на главную страницу после регистрации сработает через ProtectedRoute\r\n\r\n\treturn(\r\n\t\t<div className={styles.container}>\r\n\t\t\t<form className={styles.form} onSubmit={onFormSubmit}>\r\n\t\t\t\t<h1 className=\"text_type_main-medium\">Регистрация</h1>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input \t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tvalue={name} \r\n\t\t\t\t\t\tplaceholder=\"Имя\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input \r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname=\"email\" \r\n\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\tplaceholder=\"E-mail\"\r\n\t\t\t\t\t\terror={requestFailed}\r\n\t\t\t\t\t\terrorText={requestFailMessage ? requestFailMessage : undefined}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<PasswordInput \r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname={'password'} \r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>    \r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" size=\"large\">\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"text_type_main-default text_color_inactive mt-20\">\r\n\t\t\t\t\tУже зарегистрированы?\r\n\t\t\t\t\t<Link to=\"/login\" className=\"pl-2\">\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport styles from './common.module.css';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { forgotPassword, setForgotPasswordFormValue } from '../services/actions/user';\r\nimport { useSelector, useDispatch } from '../services/store'; \r\n\r\nexport function ForgotPasswordPage() {\r\n\r\n\tconst { email } = useSelector((store) => store.user.forgotPassword.form);\r\n\tconst { requestSuccess, requestFailed, requestFailMessage } = useSelector((store) => store.user.forgotPassword);\r\n\t\r\n\tconst dispatch = useDispatch();\r\n\tconst location = useLocation()\r\n\r\n\tconst onFormChange = (e: React.ChangeEvent<HTMLInputElement>) => {\t\t\t\r\n        dispatch(setForgotPasswordFormValue(e.target.name, e.target.value));\r\n    }\r\n\r\n\tconst onFormSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        dispatch(forgotPassword( email ));\r\n    }\r\n\r\n\t// let requestFailStatusText = '';\r\n\t// if(requestFailMessage === 404) {\r\n\t// \trequestFailStatusText = 'Такой E-mail не зарегистрирован';\r\n\t// }\r\n\r\n\tif(requestSuccess) {\r\n\t\treturn ( <Redirect to='/reset-password' /> );\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<div className={styles.container}>\r\n\t\t\t<form className={styles.form} onSubmit={onFormSubmit}>\r\n\t\t\t\t<h1 className=\"text_type_main-medium\">Восстановление пароля</h1>\t\t\t\t\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input  \r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname={'email'} \r\n\t\t\t\t\t\ttype={'email'} \t\r\n\t\t\t\t\t\tvalue={email}\t\t\t\t\t\r\n\t\t\t\t\t\tplaceholder={'Укажите e-mail'}\r\n\t\t\t\t\t\terror={requestFailed}\r\n\t\t\t\t\t\t//errorText={requestFailStatusText}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\t\r\n\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" size=\"large\">\r\n\t\t\t\t\t\tВосстановить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"text_type_main-default text_color_inactive mt-20\">\r\n\t\t\t\t\tВспомнили пароль?\r\n\t\t\t\t\t<Link to=\"/login\" className=\"pl-2\">\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport styles from './common.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { resetPassword, setResetPasswordFormValue } from '../services/actions/user';\r\nimport { useSelector, useDispatch } from '../services/store'; \r\n\r\nexport function ResetPasswordPage() {\r\n\r\n\tconst { password, token } = useSelector((store) => store.user.resetPassword.form);\r\n\tconst { requestSuccess, requestFailed, requestFailMessage } = useSelector((store) => store.user.resetPassword);\r\n\tconst forgotPasswordRequestSuccess = useSelector((store) => store.user.forgotPassword.requestSuccess);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tif(requestSuccess) {\r\n\t\treturn <Redirect to = \"/login\" />;\r\n\t}\r\n\tif(!forgotPasswordRequestSuccess) {\r\n\t\treturn <Redirect to = \"/forgot-password\" />;\r\n\t}\r\n\r\n\r\n\tconst onFormChange = (e: React.ChangeEvent<HTMLInputElement>) => {\t\t\t\r\n        dispatch(setResetPasswordFormValue(e.target.name, e.target.value));\r\n    }\r\n\r\n\tconst onFormSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        dispatch(resetPassword({ password, token }));\r\n    }\r\n\r\n\r\n\treturn(\r\n\t\t<div className={styles.container}>\r\n\t\t\t<form className={styles.form} onSubmit={onFormSubmit}>\r\n\t\t\t\t<h1 className=\"text_type_main-medium\">Восстановление пароля</h1>\t\t\t\t\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input  \r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname={'password'} \r\n\t\t\t\t\t\ttype={'password'}\r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\tplaceholder={'Введите новый пароль'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\t\t\t\t\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input  \r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname={'token'} \t\r\n\t\t\t\t\t\tvalue={token}\t\t\t\t\t\r\n\t\t\t\t\t\tplaceholder={'Введите код из письма'}\r\n\t\t\t\t\t\terror={requestFailed}\r\n\t\t\t\t\t\terrorText={requestFailMessage ? requestFailMessage : undefined}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\t\t\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" size=\"large\">\r\n\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"text_type_main-default text_color_inactive mt-20\">\r\n\t\t\t\t\tВспомнили пароль?\r\n\t\t\t\t\t<Link to=\"/login\" className=\"pl-2\">\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}","import React, { useEffect } from 'react';\r\nimport styles from '../common.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector, useDispatch } from '../../services/store';\r\nimport { getUser, updateUser, setProfileFormValue, PROFILE_FORM_RESET } from '../../services/actions/user';\r\n\r\nexport function ProfileForm() {\r\n\tconst { name, email, password } = useSelector((store) => store.user.profile.form);\r\n\tconst { requestSuccess, requestFailed, requestFailMessage } = useSelector((store) => store.user.profile);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getUser());\r\n\t}, [dispatch]); //TODO не загружать пользователя, если он уже есть\r\n\r\n\tconst onFormChange = (e: React.ChangeEvent<HTMLInputElement>) => {\t\t\t\r\n        dispatch(setProfileFormValue(e.target.name, e.target.value));\r\n    }\r\n\r\n\tconst onFormSubmit = (e: React.SyntheticEvent) => {\r\n        e.preventDefault();\r\n        dispatch(updateUser({name, email, password}));\r\n    }\r\n\r\n\tconst onClickCancel = (e: React.SyntheticEvent) => {\r\n\t\tdispatch({\r\n\t\t\ttype: PROFILE_FORM_RESET\r\n\t\t});\r\n\t};\r\n\t\r\n\treturn(\r\n\t\trequestSuccess ? (\r\n\t\t\t<form className={styles.form} onSubmit={onFormSubmit}>\t\t\t\t\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input \t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tvalue={name} \r\n\t\t\t\t\t\tplaceholder=\"Имя\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input \r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname=\"email\" \r\n\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\tplaceholder=\"Логин(E-mail)\"\r\n\t\t\t\t\t\terror={requestFailed}\r\n\t\t\t\t\t\terrorText={requestFailMessage ? requestFailMessage : undefined}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<PasswordInput \r\n\t\t\t\t\t\tonChange={onFormChange} \r\n\t\t\t\t\t\tname={'password'} \r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div> \r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Button \r\n\t\t\t\t\t\ttype=\"secondary\" \t\t\t\r\n\t\t\t\t\t\tsize=\"medium\" \r\n\t\t\t\t\t\thtmlType=\"reset\"\r\n\t\t\t\t\t\tonClick={onClickCancel}>\r\n\t\t\t\t\t\t\tОтмена\r\n\t\t\t\t\t</Button>   \t\t\t\r\n\t\t\t\t\t<Button \r\n\t\t\t\t\t\ttype=\"primary\" \r\n\t\t\t\t\t\thtmlType=\"submit\" \r\n\t\t\t\t\t\tsize=\"medium\">\r\n\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>        \t\r\n\t\t\t</form>\r\n\t\t) : (\r\n\t\t\t<h1 className = {`${styles.container} text text_type_main-large`}>Загрузка...</h1>\r\n\t\t)\r\n\t);\r\n}","import { TOrder, TIngredient } from '../../types';\r\nimport styles from './order-list-item.module.css';\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { NavLink, useLocation } from \"react-router-dom\";\r\nimport { formatDate } from '../../utils/date';\r\n\r\nexport default function OrderListItem({orderObj}: {orderObj: TOrder}) {\r\n\tconst location = useLocation();\r\n\r\n\tconst maxIngredientsShow = 6;\r\n\t\r\n\tconst totalCost = orderObj.ingredients.reduce((total: number, currentItem) => {\t\t\r\n\t\treturn currentItem ? total + (currentItem.type === 'bun' ? currentItem.price * 2 : currentItem.price) : 0;\r\n\t}, 0);\r\n\r\n\tconst overflowCounter = (orderObj.ingredients.length > maxIngredientsShow) ? \r\n\t\torderObj.ingredients.length - maxIngredientsShow : 0;\r\n\r\n\tconst orderIngredients = orderObj.ingredients.slice(0, maxIngredientsShow);\r\n\t\r\n\t\r\n\t//TODO сортировка с первой булкой\r\n\t//TODO сегодня вчера в дате\r\n\tconst orderDate = formatDate(orderObj.createdAt)\r\n\r\n\treturn (\r\n\t\t<NavLink \r\n\t\t\tto={{\r\n\t\t\t\tpathname: `${location.pathname}/${orderObj.number}`,\r\n\t\t\t\tstate: {prevLocation: location}\r\n\t\t\t}}\r\n\t\t\tclassName={styles.orderLink}\r\n\t\t>\r\n\t\t\t<div className = {`${styles.container} p-6 mb-4 mr-2`}>\r\n\t\t\t\t<div className={`${styles.header}`}>\r\n\t\t\t\t\t<p className=\"text text_type_digits-default\">#{orderObj.number}</p>\r\n\t\t\t\t\t<p className=\"text text_type_main-default text_color_inactive\">{orderDate}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h2 className='text text_type_main-medium mt-6'>{orderObj.name}</h2>\r\n\t\t\t\t<div className={`${styles.bottom} mt-6`}>\r\n\t\t\t\t\t<ul className={`${styles.ingredients}`}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\torderIngredients.map((ingredient, index) => (\r\n\t\t\t\t\t\t\t\t<div className = {styles.imageContainer} key = {index}>\r\n\t\t\t\t\t\t\t\t\t<img className={styles.ingrImage} src={ingredient.image}/>\r\n\t\t\t\t\t\t\t\t\t{(index === 0 && overflowCounter) ? \r\n\t\t\t\t\t\t\t\t\t\t<div className={`${styles.overflowCounter} text text_type_main-default`}>\r\n\t\t\t\t\t\t\t\t\t\t\t+{overflowCounter}\r\n\t\t\t\t\t\t\t\t\t\t</div> : null}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>                \r\n\t\t\t\t\t<div className={styles.total}>\r\n\t\t\t\t\t\t<span className=\"text text_type_digits-default pr-1\">{totalCost}</span>\r\n\t\t\t\t\t\t<CurrencyIcon type=\"primary\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</NavLink>\t\r\n\t);\r\n}","import { TOrder, TIngredient, defaultIngredient } from '../../../types';\r\nimport OrderListItem from '../../order-list-item/order-list-item';\r\nimport styles from './feed-list.module.css';\r\nimport { useSelector } from '../../../services/store';\r\n\r\nexport default function FeedList() {\r\n\r\n\tconst {\r\n\t\tingredientsAll, \r\n\t\tingredientsRequestFailed, \r\n\t\tingredientsRequestInProgress} = useSelector((store) => store.ingredients);\t\r\n\r\n    let { ordersArray\t} = useSelector(store => store.ws);    \r\n    let OrdersWithFullIngredients: TOrder[] = [];\r\n\r\n    if(ordersArray) {\r\n       // ordersArray.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))  //TODO не хочет так сортировать\r\n\r\n        OrdersWithFullIngredients = ordersArray.map((order) => {\r\n\r\n\t\t\tconst fullIngredients = order.ingredients.map((ingredientId) => {\r\n\t\t\t\t\t\r\n\t\t\t\tconst fullIngredient = ingredientsAll.find((ingredient) => ingredient._id === ingredientId);\r\n\t\t\t\treturn fullIngredient ? fullIngredient : defaultIngredient(ingredientId);\r\n\t\t\t});\r\n\r\n\r\n\t\t\tlet fullOrder: TOrder = {\r\n\t\t\t\t_id: order._id,\r\n\t\t\t\tstatus: order.status,\r\n\t\t\t\tname: order.name,\r\n\t\t\t\tcreatedAt: order.createdAt,\r\n\t\t\t\tupdatedAt: order.updatedAt,\r\n\t\t\t\tnumber: order.number,\r\n\t\t\t\tingredients: fullIngredients\r\n\t\t\t}\r\n\r\n\t\t\treturn fullOrder;\r\n\t    })\r\n    }\r\n\r\n\t\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ingredientsAll.length && OrdersWithFullIngredients.length ? (\r\n\t\t\t\t\r\n\t\t\t\t<ul className={styles.list}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tOrdersWithFullIngredients.map((item) => (\r\n\t\t\t\t\t\t\t<li key = {item._id}>\r\n\t\t\t\t\t\t\t\t<OrderListItem \r\n\t\t\t\t\t\t\t\t\torderObj={item}                           \r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul> \r\n\t\t\t\t) : (\r\n                    <h1 className='text text_type_main-large'>Нет заказов</h1>\r\n                )\r\n\t\t\t}\r\n\r\n\t\t\t{ingredientsRequestFailed && <h1>Ошибка загрузки данных</h1> }\r\n\t\t\t{ingredientsRequestInProgress &&  <h1 className='text text_type_main-large'>Загрузка...</h1> }\r\n\t\t</>\r\n\t);\r\n}","import React, { useEffect } from 'react';\r\nimport FeedList from '../../components/feed/feed-list/feed-list';\r\nimport styles from './orders.module.css';\r\nimport { useDispatch, useSelector, wsUrlMyOrders } from '../../services/store';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_STOP } from '../../services/actions/wsActions';\r\n\r\n\r\nexport function Orders() {\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst { wsConnected } = useSelector(store => store.ws);\r\n\r\n\tuseEffect(() => {\r\n\t\tif(!wsConnected) {\r\n\t\t\tconsole.log('dispatch WS_CONNECTION_START ')\r\n\r\n\t\t\tlet accessToken = localStorage.getItem('accessToken');\r\n\t\t\tif(accessToken) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: WS_CONNECTION_START,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\twsUrl: wsUrlMyOrders,\r\n\t\t\t\t\t\ttoken: accessToken.replace('Bearer ', '')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\t\t\r\n\t\t\t}\t\t\t\r\n\t\t}\t\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\tconsole.log('dispatch WS_CONNECTION_STOP ')\r\n\t\t\tdispatch({type: WS_CONNECTION_STOP})\r\n\t\t}\r\n\t}, [dispatch])\r\n\r\n\treturn(\r\n\t\t<>            \r\n\t\t\t<div className={`${styles.container} custom-scroll`}>\r\n\t\t\t\t<FeedList/> \r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n\r\n}","import React from 'react';\r\nimport styles from './../common.module.css';\r\nimport { useSelector } from '../../services/store'; \r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport function Logout() {\r\n\r\n\tconst currentUserEmail = useSelector((store) => store.user.currentUser.email);\r\n\tconst { requestInProgress, requestSuccess } = useSelector((store) => store.user.logout);\r\n\r\n\tif(!currentUserEmail) {\r\n\t\treturn <Redirect to = \"/login\" />;\r\n\t}\r\n\r\n\tif(requestInProgress) {\r\n\t\treturn(\r\n\t\t\t<div className={styles.container}>\r\n\t\t\t\t<h1 className=\"text_type_main-medium\">Выходим...</h1>\r\n\t\t\t</div>    \r\n\t\t);\r\n\t}\r\n\r\n\treturn <Redirect to = \"/\" />;\r\n\t\r\n}","import React from 'react';\r\nimport styles from './profile-page.module.css';\r\nimport { NavLink, Switch, Route } from 'react-router-dom';\r\nimport { ProfileForm } from './profile-form';\r\nimport { Orders } from './orders';\r\nimport { Logout } from './logout';\r\nimport { useDispatch } from '../../services/store';\r\nimport { logout } from '../../services/actions/user';\r\n\r\nexport function ProfilePage() {\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst onClickLogOut = () => {\r\n\t\tdispatch(logout());\r\n\t};\r\n\r\n\treturn(\r\n\t\r\n\t\t<main className={styles.container}>\t\t\t\r\n\t\t\t<nav className={`${styles.menu} mr-15`}>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li className={styles.menu_item}>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tto = \"/profile\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tclassName = {`${styles.link} text_type_main-medium text_color_inactive`}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tactiveClassName = {styles.active_link}\t\t\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tПрофиль\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={styles.menu_item}>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tto = \"/profile/orders\"\r\n\t\t\t\t\t\t\tclassName = {`${styles.link} text_type_main-medium text_color_inactive`}\r\n\t\t\t\t\t\t\tactiveClassName = {styles.active_link}\t\t\t\t\t\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tИстория заказов\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={styles.menu_item}>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tto = \"/profile/logout\"\r\n\t\t\t\t\t\t\tclassName = {`${styles.link} text_type_main-medium text_color_inactive`}\r\n\t\t\t\t\t\t\tactiveClassName = {styles.active_link}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonClick={ onClickLogOut }\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tВыход\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<p className=\"text_type_main-default text_color_inactive mt-20\">\r\n\t\t\t\t\tВ этом разделе вы можете изменить свои персональные данные\r\n\t\t\t\t</p>\r\n\t\t\t</nav>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route path=\"/profile\" exact>\r\n\t\t\t\t\t<ProfileForm />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path=\"/profile/orders\" exact>\r\n\t\t\t\t\t<Orders />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path=\"/profile/logout\" exact>\r\n\t\t\t\t\t<Logout />\r\n\t\t\t\t</Route>\r\n\t\t\t</Switch>\r\n\t\t</main>\r\n\r\n\t);\r\n}","import React from 'react';\r\nimport styles from './common.module.css';\r\n\r\nexport function PageNotFound() {\r\n    return(\r\n        <div className={styles.container}>\r\n            <h1 className=\"text_type_main-medium\">Страница не найдена</h1>\r\n        </div>    \r\n    );\r\n}","import React from 'react';\r\nimport IngredientDetails from '../components/ingredients-details/ingredients-details';\r\nimport styles from './common.module.css';\r\n\r\nexport function IngredientPage() {\r\n\r\n\treturn (\r\n\t\t<div className={styles.container}>\r\n\t\t\t<h1 className={`${styles.header} text text_type_main-large`}>\r\n\t\t\t\tДетали ингредиента\r\n\t\t\t</h1>\r\n\t\t\t<IngredientDetails />\r\n\t\t</div>\r\n\t)\r\n\t\r\n}","import styles from './feed-stat.module.css';\r\nimport { useSelector } from '../../../services/store';\r\nimport { OrderStatuses } from '../../../types';\r\n\r\nexport default function FeedStat() {\r\n\r\n\tconst { ordersArray, \r\n\t\ttotalOrders, \r\n\t\ttotalOrdersToday } = useSelector(store => store.ws);  \r\n        \r\n    const readyOrders = ordersArray.filter((order) => order.status === OrderStatuses.done).slice(0, 20)\r\n    const pendingOrders = ordersArray.filter((order) => order.status === OrderStatuses.pending)   \r\n\r\n\treturn (\r\n\t\t<div className = {styles.container}>\r\n\t\t\t<div className={styles.orderProgress}>\r\n\t\t\t\t<div className={styles.statusColumn}>\r\n\t\t\t\t\t<h3 className = \"text text_type_main-medium mb-6\">Готовы:</h3>\r\n\t\t\t\t\t<ul className={styles.orderNumbers}>\r\n                        {readyOrders && readyOrders.map((order) => \r\n                            <li \r\n\t\t\t\t\t\t\t\tclassName={`${styles.readyOrder} text text_type_digits-default pb-2 pr-6`} \r\n\t\t\t\t\t\t\t\tkey={order.number}>\r\n                                \t{order.number}\r\n                            </li>       \r\n                        )}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n                <div className = \"ml-9\">\r\n\t\t\t\t\t<h3 className = \"text text_type_main-medium mb-6 \">В работе:</h3>\r\n\t\t\t\t\t<ul className={styles.orderNumbers}>\r\n                        {pendingOrders && pendingOrders.map((order) => \r\n                            <li \r\n\t\t\t\t\t\t\t\tclassName={`text text_type_digits-default pb-2 pr-6`} \r\n\t\t\t\t\t\t\t\tkey={order.number}>\r\n                                \t{order.number}\r\n                            </li>       \r\n                        )}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n            \r\n            <h3 className = \"text text_type_main-medium mt-15\">Выполнено за всё время:</h3>\r\n            <p className=\"text text_type_digits-large\">{totalOrders.toLocaleString()}</p>\r\n\r\n            {totalOrdersToday && \r\n                <div>\r\n                    <h3 className = \"text text_type_main-medium mt-15\">Выполнено за сегодня:</h3>\r\n                    <p className=\"text text_type_digits-large\">{totalOrdersToday.toLocaleString()}</p>\r\n                </div>\r\n            }\r\n           \r\n\t\t</div>\r\n\t)\r\n}","import React, { useEffect } from 'react';\r\nimport FeedList from '../components/feed/feed-list/feed-list';\r\nimport FeedStat from '../components/feed/feed-stat/feed-stat';\r\nimport styles from './feed-page.module.css';\r\nimport { useDispatch, useSelector, wsUrlAllOrders } from '../services/store';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_STOP } from '../services/actions/wsActions';\r\n\r\n\r\nexport function FeedPage() {\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst { wsConnected } = useSelector(store => store.ws);\r\n\r\n\tuseEffect(() => {\r\n\t\tif(!wsConnected) {\r\n\t\t\tconsole.log('dispatch WS_CONNECTION_START ')\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: WS_CONNECTION_START,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\twsUrl: wsUrlAllOrders\r\n\t\t\t\t}\r\n\t\t\t})\t\t\r\n\t\t}\t\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\tconsole.log('dispatch WS_CONNECTION_STOP ')\r\n\t\t\tdispatch({type: WS_CONNECTION_STOP})\r\n\t\t}\r\n\t}, [dispatch])\r\n\r\n\treturn(\r\n\t\t<>            \r\n\t\t\t<div className={styles.container}>\r\n\t\t\t\t<div className={styles.centerContainer}>\t\t\t\t\r\n\t\t\t\t\t<h1 className='text text_type_main-large pt-10 pb-10 pl-4'>Лента заказов</h1>\r\n\t\t\t\t\t<div className={styles.ordersContainer}>                \r\n\t\t\t\t\t\t<div className={`${styles.feedContainer} custom-scroll`}>\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<FeedList/>\r\n\t\t\t\t\t\t</div>       \r\n\r\n\t\t\t\t\t\t<div className={`${styles.statContainer} ml-15`}>\r\n\t\t\t\t\t\t\t<FeedStat/>\r\n\t\t\t\t\t\t</div>    \r\n\t\t\t\t\t</div>    \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n\r\n}","import OrderInfo from \"../components/order-info/order-info\";\r\nimport styles from './order-info.module.css';\r\n\r\nexport function OrderInfoPage() {\r\n    return (\r\n        <div className={styles.container}>\r\n            <OrderInfo/>\r\n        </div>\r\n    )\r\n}","import { useSelector } from '../services/store';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport function ProtectedRoute({ children, ...rest }) {\r\n\tconst {email, userIsLoading} = useSelector((store) => store.user.currentUser); //по F5 не успевае прогрузиться\r\n\t//const accessToken = localStorage.getItem('accessToken');\r\n\r\n    if(!email && userIsLoading) {\r\n        return <h1 className='text text_type_main-large'>Загрузка</h1>\r\n    }\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender = {({ location }) =>\r\n                email ? (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\tpathname: '/login',\r\n\t\t\t\t\t\t\tstate: { from: location }\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n  );\r\n}","import React, {useEffect} from 'react';\r\nimport styles from './app.module.css';\r\nimport AppHeader from '../app-header/app-header';\r\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients';\r\nimport BurgerConstructor from '../burger-constructor/burger-constructor';\r\nimport IngredientDetails from '../ingredients-details/ingredients-details';\r\nimport OrderInfo from '../order-info/order-info';\r\nimport {useDispatch, useSelector} from '../../services/store';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom';\r\nimport { LoginPage, \r\n\t\t\tRegisterPage, \r\n\t\t\tForgotPasswordPage, \r\n\t\t\tResetPasswordPage, \r\n\t\t\tProfilePage, \r\n\t\t\tIngredientPage,\t\r\n\t\t\tFeedPage,\t\r\n\t\t\tOrderInfoPage,\t\r\n\t\t\tPageNotFound } from '../../pages';\r\n\r\nimport { getIngredients } from '../../services/actions/ingredients';\r\nimport { getUser } from '../../services/actions/user';\r\nimport { ProtectedRoute } from '../protected-route';\r\nimport Modal from '../modal/modal';\r\nimport { TLocation, TLocationState } from '../../types';\r\n\r\n\r\n\r\nexport default function App() {\r\n\t\r\n\tconst location: TLocationState = useLocation();\r\n\tconst history = useHistory();\r\n\tlet prevLocation: TLocation = location.state && location.state.prevLocation;\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getIngredients());\t\r\n\t}, [dispatch]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getUser());\r\n\t}, [dispatch]);\r\n\r\n\tconst closeModalWindow = () => history.goBack();\r\n\r\n\t\r\n\tconst {\r\n\t\tingredientsAll, \r\n\t\tingredientsRequestFailed, \r\n\t\tingredientsRequestInProgress} = useSelector((store) => store.ingredients);\r\n\tconst currentUserName = useSelector((store) => store.user.currentUser.name);\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AppHeader currentUserName = {currentUserName}/>\t\t\t\t\r\n\t\t\t<Switch location = {prevLocation || location}>\r\n\t\t\t\t<Route path=\"/\" exact>\r\n\t\t\t\t\t<DndProvider backend={HTML5Backend}>\r\n\t\t\t\t\t\t<main className={styles.main}>\r\n\t\t\t\t\t\t\t{ingredientsAll.length ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<BurgerIngredients />\r\n\t\t\t\t\t\t\t\t\t<BurgerConstructor />\r\n\t\t\t\t\t\t\t\t</> ) : (null)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t{ingredientsRequestFailed && <h1 className='text text_type_main-large'>Ошибка загрузки данных</h1> }\r\n\t\t\t\t\t\t\t{ingredientsRequestInProgress &&  <h1 className='text text_type_main-large'>Загрузка...</h1> }\r\n\t\t\t\t\t\t</main>\t\t\r\n\t\t\t\t\t</DndProvider>\r\n\t\t\t\t</Route>\t\r\n\t\t\t\t<Route path=\"/login\" exact>\r\n\t\t\t\t\t<LoginPage />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path=\"/register\" exact>\r\n\t\t\t\t\t<RegisterPage />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path=\"/forgot-password\" exact>\r\n\t\t\t\t\t<ForgotPasswordPage />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path=\"/reset-password\" exact>\r\n\t\t\t\t\t<ResetPasswordPage />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<ProtectedRoute path=\"/profile/orders/:orderNumber\" exact>\r\n\t\t\t\t\t<OrderInfoPage />\r\n\t\t\t\t</ProtectedRoute>\t\r\n\t\t\t\t<ProtectedRoute path=\"/profile\">\r\n\t\t\t\t\t<ProfilePage />\r\n\t\t\t\t</ProtectedRoute>\t\t\r\n\t\t\t\t<Route path=\"/ingredients/:id\" exact>\r\n\t\t\t\t\t<IngredientPage />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path=\"/feed\" exact>\r\n\t\t\t\t\t<FeedPage />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path=\"/feed/:orderNumber\" exact>\r\n\t\t\t\t\t<OrderInfoPage />\r\n\t\t\t\t</Route>\t               \r\n\t\t\t\t<Route>\r\n\t\t\t\t\t<PageNotFound />\r\n\t\t\t\t</Route>\r\n\t\t\t</Switch>\t\r\n\t\t\t{ prevLocation && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath=\"/ingredients/:id\"\r\n\t\t\t\t\t\tchildren={\r\n\t\t\t\t\t\t\t<Modal \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\ttitle = \"Детали ингредиента\"\r\n\t\t\t\t\t\t\t\tonModalClose = {closeModalWindow}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<IngredientDetails />\r\n\t\t\t\t\t\t\t</Modal>\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath=\"/feed/:orderNumber\"\r\n\t\t\t\t\t\tchildren={\r\n\t\t\t\t\t\t\t<Modal onModalClose = {closeModalWindow}>\r\n\t\t\t\t\t\t\t\t<OrderInfo />\r\n\t\t\t\t\t\t\t</Modal>\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ProtectedRoute\r\n\t\t\t\t\t\tpath=\"/profile/orders/:orderNumber\"\r\n\t\t\t\t\t\tchildren={\r\n\t\t\t\t\t\t\t<Modal onModalClose = {closeModalWindow}>\r\n\t\t\t\t\t\t\t\t<OrderInfo />\r\n\t\t\t\t\t\t\t</Modal>\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t)}\t\t\r\n\t\t\t\r\n\t\t</>\r\n\t);\r\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './services/store';\r\nimport { HashRouter } from 'react-router-dom';\r\n\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Provider store={store}>\r\n\t\t\t<HashRouter>\r\n\t\t\t\t<App />\r\n\t\t\t</HashRouter>\r\n\t\t</Provider>\t\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-info_container__1_BLt\",\"orderNumber\":\"order-info_orderNumber__1lJnx\",\"readyOrder\":\"order-info_readyOrder__3MBsk\",\"ingredientList\":\"order-info_ingredientList__7pp3K\",\"ingrImage\":\"order-info_ingrImage__LP8jD\",\"ingredientRow\":\"order-info_ingredientRow__1bfOi\",\"titlePriceContainer\":\"order-info_titlePriceContainer__GVxg7\",\"bottom\":\"order-info_bottom__30UZ4\",\"price\":\"order-info_price__21Z1h\",\"total\":\"order-info_total__3tuUR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-list-item_container__2nfHA\",\"header\":\"order-list-item_header__13Gy-\",\"bottom\":\"order-list-item_bottom__20Tq4\",\"total\":\"order-list-item_total__1T9Qx\",\"ingredients\":\"order-list-item_ingredients__Nc9vf\",\"imageContainer\":\"order-list-item_imageContainer__39m3T\",\"ingrImage\":\"order-list-item_ingrImage__flAs5\",\"overflowCounter\":\"order-list-item_overflowCounter__Hdmwg\",\"orderLink\":\"order-list-item_orderLink__3QanG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"windowBody\":\"order-details_windowBody__eHcjb\",\"doneImage\":\"order-details_doneImage__mT8jy\",\"centerText\":\"order-details_centerText__j-z1u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1_EJf\",\"link\":\"app-header_link__2asRg\",\"link_active\":\"app-header_link_active__1SAIG\",\"text_color_primary\":\"app-header_text_color_primary__3sFHs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"windowBody\":\"ingredients-details_windowBody__5SGFz\",\"calories\":\"ingredients-details_calories__1zaqD\",\"caloriesItem\":\"ingredients-details_caloriesItem__1LKup\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"feed-stat_container__3wQxv\",\"orderProgress\":\"feed-stat_orderProgress__N31GN\",\"orderNumbers\":\"feed-stat_orderNumbers__1wTcN\",\"readyOrder\":\"feed-stat_readyOrder__3JGN9\",\"statusColumn\":\"feed-stat_statusColumn__3Jayb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient_container__QkGWJ\",\"image\":\"ingredient_image__2KOXj\",\"price\":\"ingredient_price__2fSur\",\"itemName\":\"ingredient_itemName__2W_X7\",\"link\":\"ingredient_link__3MdSV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__2Gd4z\",\"drag_list\":\"burger-constructor_drag_list__2azu0\",\"drag_element\":\"burger-constructor_drag_element__1qcBm\",\"bun\":\"burger-constructor_bun__1wwi_\",\"dropTarget\":\"burger-constructor_dropTarget__3vPtP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"feed-page_container__3sOGu\",\"centerContainer\":\"feed-page_centerContainer__3nz8h\",\"ordersContainer\":\"feed-page_ordersContainer__2Xtmr\",\"feedContainer\":\"feed-page_feedContainer__k_Nn_\",\"statContainer\":\"feed-page_statContainer__133MI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__9EGsa\",\"tabs\":\"burger-ingredients_tabs__240Xk\",\"groups\":\"burger-ingredients_groups__32cOk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"window\":\"modal_window__33yTe\",\"title\":\"modal_title__3T8OQ\",\"closeButton\":\"modal_closeButton__2nuuy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"icon-button_icon__2Qs7Q\",\"text\":\"icon-button_text__rMrMY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"drag-element_container__1qNxO\",\"drag_icon\":\"drag-element_drag_icon__1Cg5G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"cart-total_container__1Vvxc\",\"currency\":\"cart-total_currency__7M0z0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"common_container__3lrKU\",\"form\":\"common_form__LolAb\"};"],"sourceRoot":""}